//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: playn/core/canvas/SurfaceLayerCanvas.java
//
//  Created by Thomas on 7/1/13.
//

#import "AbstractLayer.h"
#import "Asserts.h"
#import "Canvas.h"
#import "CanvasImage.h"
#import "CanvasSurface.h"
#import "InternalTransform.h"
#import "LayerCanvas.h"
#import "Surface.h"
#import "SurfaceLayerCanvas.h"

@implementation PlaynCoreCanvasSurfaceLayerCanvas

- (id<PlaynCoreCanvasImage>)image {
  return image_;
}
- (void)setImage:(id<PlaynCoreCanvasImage>)image {
  JreOperatorRetainedAssign(&image_, self, image);
}
@synthesize image = image_;
- (PlaynCoreCanvasCanvasSurface *)surface_ {
  return surface__;
}
- (void)setSurface_:(PlaynCoreCanvasCanvasSurface *)surface_ {
  JreOperatorRetainedAssign(&surface__, self, surface_);
}
@synthesize surface_ = surface__;

- (id)initWithPlaynCoreInternalTransform:(id<PlaynCoreInternalTransform>)xform
                withPlaynCoreCanvasImage:(id<PlaynCoreCanvasImage>)image {
  if ((self = [super initWithPlaynCoreInternalTransform:xform])) {
    self.image = image;
    self.surface_ = [[[PlaynCoreCanvasCanvasSurface alloc] initWithPlaynCoreCanvas:[((id<PlaynCoreCanvasImage>) NIL_CHK(image)) canvas]] autorelease];
  }
  return self;
}

- (id<PlaynCoreSurface>)surface {
  return surface__;
}

- (float)width {
  (void) [PlaynCoreAsserts checkNotNullWithId:surface__ withId:@"Surface must not be null"];
  return [((PlaynCoreCanvasCanvasSurface *) NIL_CHK(surface__)) width];
}

- (float)height {
  (void) [PlaynCoreAsserts checkNotNullWithId:surface__ withId:@"Surface must not be null"];
  return [((PlaynCoreCanvasCanvasSurface *) NIL_CHK(surface__)) height];
}

- (float)scaledWidth {
  return [self scaleX] * [self width];
}

- (float)scaledHeight {
  return [self scaleY] * [self height];
}

- (void)destroy {
  [super destroy];
  JreOperatorRetainedAssign(&image_, self, nil);
  JreOperatorRetainedAssign(&surface__, self, nil);
}

- (void)paintWithPlaynCoreCanvas:(id<PlaynCoreCanvas>)canvas
                       withFloat:(float)parentAlpha {
  if (![self visible]) return;
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) save];
  [self transformWithPlaynCoreCanvas:canvas];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) setAlphaWithFloat:parentAlpha * [self alpha]];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) drawImageWithPlaynCoreImage:image_ withFloat:0 withFloat:0];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) restore];
}

- (void)dealloc {
  JreOperatorRetainedAssign(&surface__, self, nil);
  JreOperatorRetainedAssign(&image_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreCanvasSurfaceLayerCanvas *typedCopy = (PlaynCoreCanvasSurfaceLayerCanvas *) copy;
  typedCopy.image = image_;
  typedCopy.surface_ = surface__;
}

@end
