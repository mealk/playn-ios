//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pythagoras/d/CurveCrossingHelper.java
//
//  Created by Thomas on 7/1/13.
//

#import "GeometryUtil.h"
#import "IOSDoubleArray.h"
#import "IOSIntArray.h"
#import "IOSObjectArray.h"
#import "IntersectPoint.h"
#import "PathIterator.h"
#import "java/lang/Math.h"
#import "java/util/ArrayList.h"
#import "java/util/Iterator.h"
#import "java/util/List.h"
#import "CurveCrossingHelper.h"

@implementation PythagorasDCurveCrossingHelper

- (IOSObjectArray *)coords {
  return coords_;
}
- (void)setCoords:(IOSObjectArray *)coords {
  JreOperatorRetainedAssign(&coords_, self, coords);
}
@synthesize coords = coords_;
- (IOSObjectArray *)rules {
  return rules_;
}
- (void)setRules:(IOSObjectArray *)rules {
  JreOperatorRetainedAssign(&rules_, self, rules);
}
@synthesize rules = rules_;
- (IOSIntArray *)sizes {
  return sizes_;
}
- (void)setSizes:(IOSIntArray *)sizes {
  JreOperatorRetainedAssign(&sizes_, self, sizes);
}
@synthesize sizes = sizes_;
- (IOSIntArray *)rulesSizes {
  return rulesSizes_;
}
- (void)setRulesSizes:(IOSIntArray *)rulesSizes {
  JreOperatorRetainedAssign(&rulesSizes_, self, rulesSizes);
}
@synthesize rulesSizes = rulesSizes_;
- (IOSObjectArray *)offsets {
  return offsets_;
}
- (void)setOffsets:(IOSObjectArray *)offsets {
  JreOperatorRetainedAssign(&offsets_, self, offsets);
}
@synthesize offsets = offsets_;
- (id<JavaUtilList>)isectPoints {
  return isectPoints_;
}
- (void)setIsectPoints:(id<JavaUtilList>)isectPoints {
  JreOperatorRetainedAssign(&isectPoints_, self, isectPoints);
}
@synthesize isectPoints = isectPoints_;

- (id)initWithJavaLangDoubleArray:(IOSObjectArray *)coords
         withJavaLangIntegerArray:(IOSIntArray *)sizes
         withJavaLangIntegerArray:(IOSObjectArray *)rules
         withJavaLangIntegerArray:(IOSIntArray *)rulesSizes
         withJavaLangIntegerArray:(IOSObjectArray *)offsets {
  if ((self = [super init])) {
    JreOperatorRetainedAssign(&isectPoints_, self, [[[JavaUtilArrayList alloc] init] autorelease]);
    self.coords = coords;
    self.rules = rules;
    self.sizes = sizes;
    self.rulesSizes = rulesSizes;
    self.offsets = offsets;
  }
  return self;
}

- (IOSObjectArray *)findCrossing {
  IOSDoubleArray *edge1 = [[[IOSDoubleArray alloc] initWithLength:8] autorelease];
  IOSDoubleArray *edge2 = [[[IOSDoubleArray alloc] initWithLength:8] autorelease];
  IOSDoubleArray *points = [[[IOSDoubleArray alloc] initWithLength:6] autorelease];
  IOSDoubleArray *params = [[[IOSDoubleArray alloc] initWithLength:6] autorelease];
  IOSDoubleArray *mp1 = [[[IOSDoubleArray alloc] initWithLength:2] autorelease];
  IOSDoubleArray *cp1 = [[[IOSDoubleArray alloc] initWithLength:2] autorelease];
  IOSDoubleArray *mp2 = [[[IOSDoubleArray alloc] initWithLength:2] autorelease];
  IOSDoubleArray *cp2 = [[[IOSDoubleArray alloc] initWithLength:2] autorelease];
  int rule1, rule2, endIndex1, endIndex2;
  int ipCount = 0;
  for (int i = 0; i < [((IOSIntArray *) NIL_CHK(rulesSizes_)) intAtIndex:0]; i++) {
    rule1 = [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(rules_)) objectAtIndex:0]) intAtIndex:i];
    endIndex1 = [self currentEdgeWithInt:0 withInt:i withJavaLangDoubleArray:edge1 withJavaLangDoubleArray:mp1 withJavaLangDoubleArray:cp1];
    for (int j = 0; j < [((IOSIntArray *) NIL_CHK(rulesSizes_)) intAtIndex:1]; j++) {
      ipCount = 0;
      rule2 = [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(rules_)) objectAtIndex:1]) intAtIndex:j];
      endIndex2 = [self currentEdgeWithInt:1 withInt:j withJavaLangDoubleArray:edge2 withJavaLangDoubleArray:mp2 withJavaLangDoubleArray:cp2];
      if (((rule1 == PythagorasDPathIterator_SEG_LINETO) || (rule1 == PythagorasDPathIterator_SEG_CLOSE)) && ((rule2 == PythagorasDPathIterator_SEG_LINETO) || (rule2 == PythagorasDPathIterator_SEG_CLOSE))) {
        ipCount = [PythagorasDGeometryUtil intersectLinesWithParamsWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withJavaLangDoubleArray:params];
        if (ipCount != 0) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:0 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:1 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3]]];
        }
      }
      else if (((rule1 == PythagorasDPathIterator_SEG_LINETO) || (rule1 == PythagorasDPathIterator_SEG_CLOSE)) && (rule2 == PythagorasDPathIterator_SEG_QUADTO)) {
        ipCount = [PythagorasDGeometryUtil intersectLineAndQuadWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3]]];
        }
      }
      else if (rule1 == PythagorasDPathIterator_SEG_QUADTO && (rule2 == PythagorasDPathIterator_SEG_LINETO || rule2 == PythagorasDPathIterator_SEG_CLOSE)) {
        ipCount = [PythagorasDGeometryUtil intersectLineAndQuadWithDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3]]];
        }
      }
      else if ((rule1 == PythagorasDPathIterator_SEG_CUBICTO) && ((rule2 == PythagorasDPathIterator_SEG_LINETO) || (rule2 == PythagorasDPathIterator_SEG_CLOSE))) {
        ipCount = [PythagorasDGeometryUtil intersectLineAndCubicWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:7] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3]]];
        }
      }
      else if (((rule1 == PythagorasDPathIterator_SEG_LINETO) || (rule1 == PythagorasDPathIterator_SEG_CLOSE)) && (rule2 == PythagorasDPathIterator_SEG_CUBICTO)) {
        ipCount = [PythagorasDGeometryUtil intersectLineAndCubicWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:7] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil lineWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3]]];
        }
      }
      else if ((rule1 == PythagorasDPathIterator_SEG_QUADTO) && (rule2 == PythagorasDPathIterator_SEG_QUADTO)) {
        ipCount = [PythagorasDGeometryUtil intersectQuadsWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5]]];
        }
      }
      else if ((rule1 == PythagorasDPathIterator_SEG_QUADTO) && (rule2 == PythagorasDPathIterator_SEG_CUBICTO)) {
        ipCount = [PythagorasDGeometryUtil intersectQuadAndCubicWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:7] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5]]];
        }
      }
      else if ((rule1 == PythagorasDPathIterator_SEG_CUBICTO) && (rule2 == PythagorasDPathIterator_SEG_QUADTO)) {
        ipCount = [PythagorasDGeometryUtil intersectQuadAndCubicWithDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:7] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil quadWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5]]];
        }
      }
      else if ((rule1 == PythagorasDPathIterator_SEG_CUBICTO) && (rule2 == PythagorasDPathIterator_SEG_CUBICTO)) {
        ipCount = [PythagorasDGeometryUtil intersectCubicsWithDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:7] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:6] withDouble:[((IOSDoubleArray *) NIL_CHK(edge2)) doubleAtIndex:7] withJavaLangDoubleArray:params];
        for (int k = 0; k < ipCount; k++) {
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k withDouble:[PythagorasDGeometryUtil cubicWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:0] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:2] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:4] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:6]]];
          [((IOSDoubleArray *) NIL_CHK(points)) replaceDoubleAtIndex:2 * k + 1 withDouble:[PythagorasDGeometryUtil cubicWithDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:1] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:3] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:5] withDouble:[((IOSDoubleArray *) NIL_CHK(edge1)) doubleAtIndex:7]]];
        }
      }
      endIndex1 = i;
      endIndex2 = j;
      int begIndex1 = i - 1;
      int begIndex2 = j - 1;
      for (int k = 0; k < ipCount; k++) {
        PythagorasDIntersectPoint *ip = nil;
        if (![self containsPointWithDouble:[((IOSDoubleArray *) NIL_CHK(points)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(points)) doubleAtIndex:2 * k + 1]]) {
          for (id<JavaUtilIterator> iter = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(isectPoints_)) iterator]); [((id<JavaUtilIterator>) NIL_CHK(iter)) hasNext]; ) {
            ip = ((PythagorasDIntersectPoint *) [((id<JavaUtilIterator>) NIL_CHK(iter)) next]);
            if ((begIndex1 == [((PythagorasDIntersectPoint *) NIL_CHK(ip)) begIndexWithBOOL:YES]) && (endIndex1 == [((PythagorasDIntersectPoint *) NIL_CHK(ip)) endIndexWithBOOL:YES])) {
              if ([((PythagorasDIntersectPoint *) NIL_CHK(ip)) paramWithBOOL:YES] > [((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k]) {
                endIndex1 = -([((id<JavaUtilList>) NIL_CHK(isectPoints_)) indexOfWithId:ip] + 1);
                [((PythagorasDIntersectPoint *) NIL_CHK(ip)) setBegIndex1WithInt:-([((id<JavaUtilList>) NIL_CHK(isectPoints_)) size] + 1)];
              }
              else {
                begIndex1 = -([((id<JavaUtilList>) NIL_CHK(isectPoints_)) indexOfWithId:ip] + 1);
                [((PythagorasDIntersectPoint *) NIL_CHK(ip)) setEndIndex1WithInt:-([((id<JavaUtilList>) NIL_CHK(isectPoints_)) size] + 1)];
              }
            }
            if ((begIndex2 == [((PythagorasDIntersectPoint *) NIL_CHK(ip)) begIndexWithBOOL:NO]) && (endIndex2 == [((PythagorasDIntersectPoint *) NIL_CHK(ip)) endIndexWithBOOL:NO])) {
              if ([((PythagorasDIntersectPoint *) NIL_CHK(ip)) paramWithBOOL:NO] > [((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1]) {
                endIndex2 = -([((id<JavaUtilList>) NIL_CHK(isectPoints_)) indexOfWithId:ip] + 1);
                [((PythagorasDIntersectPoint *) NIL_CHK(ip)) setBegIndex2WithInt:-([((id<JavaUtilList>) NIL_CHK(isectPoints_)) size] + 1)];
              }
              else {
                begIndex2 = -([((id<JavaUtilList>) NIL_CHK(isectPoints_)) indexOfWithId:ip] + 1);
                [((PythagorasDIntersectPoint *) NIL_CHK(ip)) setEndIndex2WithInt:-([((id<JavaUtilList>) NIL_CHK(isectPoints_)) size] + 1)];
              }
            }
          }
          if (rule1 == PythagorasDPathIterator_SEG_CLOSE) {
            rule1 = PythagorasDPathIterator_SEG_LINETO;
          }
          if (rule2 == PythagorasDPathIterator_SEG_CLOSE) {
            rule2 = PythagorasDPathIterator_SEG_LINETO;
          }
          [((id<JavaUtilList>) NIL_CHK(isectPoints_)) addWithId:[[[PythagorasDIntersectPoint alloc] initWithInt:begIndex1 withInt:endIndex1 withInt:rule1 withInt:i withInt:begIndex2 withInt:endIndex2 withInt:rule2 withInt:j withDouble:[((IOSDoubleArray *) NIL_CHK(points)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(points)) doubleAtIndex:2 * k + 1] withDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k] withDouble:[((IOSDoubleArray *) NIL_CHK(params)) doubleAtIndex:2 * k + 1]] autorelease]];
        }
      }
    }
  }
  return [((id<JavaUtilList>) NIL_CHK(isectPoints_)) toArrayWithNSObjectArray:[[[IOSObjectArray alloc] initWithLength:[((id<JavaUtilList>) NIL_CHK(isectPoints_)) size] type:[IOSClass classWithClass:[PythagorasDIntersectPoint class]]] autorelease]];
}

- (int)currentEdgeWithInt:(int)areaIndex
                  withInt:(int)index
  withJavaLangDoubleArray:(IOSDoubleArray *)c
  withJavaLangDoubleArray:(IOSDoubleArray *)mp
  withJavaLangDoubleArray:(IOSDoubleArray *)cp {
  int endIndex = 0;
  switch ([((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(rules_)) objectAtIndex:areaIndex]) intAtIndex:index]) {
    case PythagorasDPathIterator_SEG_MOVETO:
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(mp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index]]]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(mp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 1]]];
    break;
    case PythagorasDPathIterator_SEG_LINETO:
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:0]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:1]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:2 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index]]]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:3 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 1]]];
    endIndex = 0;
    break;
    case PythagorasDPathIterator_SEG_QUADTO:
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:0]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:1]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:2 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index]]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:3 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 1]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:4 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 2]]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:5 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 3]]];
    endIndex = 2;
    break;
    case PythagorasDPathIterator_SEG_CUBICTO:
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:0]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:1]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:2 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index]]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:3 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 1]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:4 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 2]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:5 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 3]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:6 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 4]]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:7 withDouble:[((IOSDoubleArray *) [((IOSObjectArray *) NIL_CHK(coords_)) objectAtIndex:areaIndex]) doubleAtIndex:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + 5]]];
    endIndex = 4;
    break;
    case PythagorasDPathIterator_SEG_CLOSE:
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:0]];
    [((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(cp)) doubleAtIndex:1]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:0 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:2 withDouble:[((IOSDoubleArray *) NIL_CHK(mp)) doubleAtIndex:0]]];
    [((IOSDoubleArray *) NIL_CHK(cp)) replaceDoubleAtIndex:1 withDouble:[((IOSDoubleArray *) NIL_CHK(c)) replaceDoubleAtIndex:3 withDouble:[((IOSDoubleArray *) NIL_CHK(mp)) doubleAtIndex:1]]];
    if ([((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] >= [((IOSIntArray *) NIL_CHK(sizes_)) intAtIndex:areaIndex]) {
      endIndex = -[((IOSIntArray *) NIL_CHK(sizes_)) intAtIndex:areaIndex];
    }
    else {
      endIndex = 0;
    }
    break;
  }
  return [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(offsets_)) objectAtIndex:areaIndex]) intAtIndex:index] + endIndex;
}

- (BOOL)containsPointWithDouble:(double)x
                     withDouble:(double)y {
  PythagorasDIntersectPoint *ipoint;
  for (id<JavaUtilIterator> i = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(isectPoints_)) iterator]); [((id<JavaUtilIterator>) NIL_CHK(i)) hasNext]; ) {
    ipoint = ((PythagorasDIntersectPoint *) [((id<JavaUtilIterator>) NIL_CHK(i)) next]);
    if (([JavaLangMath absWithDouble:[((PythagorasDIntersectPoint *) NIL_CHK(ipoint)) x] - x] < [JavaLangMath powWithDouble:10 withDouble:-6]) && ([JavaLangMath absWithDouble:[((PythagorasDIntersectPoint *) NIL_CHK(ipoint)) y] - y] < [JavaLangMath powWithDouble:10 withDouble:-6])) {
      return YES;
    }
  }
  return NO;
}

- (void)dealloc {
  JreOperatorRetainedAssign(&isectPoints_, self, nil);
  JreOperatorRetainedAssign(&offsets_, self, nil);
  JreOperatorRetainedAssign(&rulesSizes_, self, nil);
  JreOperatorRetainedAssign(&sizes_, self, nil);
  JreOperatorRetainedAssign(&rules_, self, nil);
  JreOperatorRetainedAssign(&coords_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PythagorasDCurveCrossingHelper *typedCopy = (PythagorasDCurveCrossingHelper *) copy;
  typedCopy.coords = coords_;
  typedCopy.rules = rules_;
  typedCopy.sizes = sizes_;
  typedCopy.rulesSizes = rulesSizes_;
  typedCopy.offsets = offsets_;
  typedCopy.isectPoints = isectPoints_;
}

@end
