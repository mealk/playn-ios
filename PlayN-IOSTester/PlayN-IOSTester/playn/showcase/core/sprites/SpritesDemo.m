//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/playn/showcase/core/sprites/SpritesDemo.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSClass.h"
#include "java/util/ArrayList.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "playn/core/Assets.h"
#include "playn/core/Graphics.h"
#include "playn/core/GroupLayer.h"
#include "playn/core/Image.h"
#include "playn/core/ImageLayer.h"
#include "playn/core/PlayN.h"
#include "playn/core/Pointer.h"
#include "playn/core/Sound.h"
#include "playn/showcase/core/sprites/Pea.h"
#include "playn/showcase/core/sprites/SpritesDemo.h"

@implementation PlaynShowcaseCoreSpritesSpritesDemo

@synthesize layer = layer_;
@synthesize peas = peas_;
@synthesize ding = ding_;

- (NSString *)name {
  return @"Sprites";
}

- (void)init__ OBJC_METHOD_FAMILY_NONE {
  layer_ = [((id<PlaynCoreGraphics>) nil_chk([PlaynCorePlayN graphics])) createGroupLayer];
  [((id<PlaynCoreGroupLayer>) nil_chk([((id<PlaynCoreGraphics>) nil_chk([PlaynCorePlayN graphics])) rootLayer])) addWithPlaynCoreLayer:layer_];
  ding_ = [((id<PlaynCoreAssets>) nil_chk([PlaynCorePlayN assets])) getSoundWithNSString:@"sprites/ding"];
  id<PlaynCoreImage> bgImage = [((id<PlaynCoreAssets>) nil_chk([PlaynCorePlayN assets])) getImageWithNSString:@"sprites/bg.png"];
  id<PlaynCoreImageLayer> bgLayer = [((id<PlaynCoreGraphics>) nil_chk([PlaynCorePlayN graphics])) createImageLayerWithPlaynCoreImage:bgImage];
  [((id<PlaynCoreGroupLayer>) nil_chk(layer_)) addWithPlaynCoreLayer:bgLayer];
  [((id<PlaynCorePointer>) nil_chk([PlaynCorePlayN pointer])) setListenerWithPlaynCorePointer_Listener:[[PlaynShowcaseCoreSpritesSpritesDemo_$1 alloc] initWithPlaynShowcaseCoreSpritesSpritesDemo:self]];
  [self addPeaWithFloat:[((id<PlaynCoreGraphics>) nil_chk([PlaynCorePlayN graphics])) width] / 2 withFloat:[((id<PlaynCoreGraphics>) nil_chk([PlaynCorePlayN graphics])) height] / 2];
}

- (void)addPeaWithFloat:(float)x
              withFloat:(float)y {
  PlaynShowcaseCoreSpritesPea *pea = [[PlaynShowcaseCoreSpritesPea alloc] initWithPlaynCoreGroupLayer:layer_ withFloat:x withFloat:y];
  [((id<JavaUtilList>) nil_chk(peas_)) addWithId:pea];
  [((id<PlaynCoreSound>) nil_chk(ding_)) play];
}

- (void)shutdown {
  [((id<PlaynCorePointer>) nil_chk([PlaynCorePlayN pointer])) setListenerWithPlaynCorePointer_Listener:nil];
  [((id<PlaynCoreGroupLayer>) nil_chk(layer_)) destroy];
  layer_ = nil;
}

- (void)paintWithFloat:(float)alpha {
}

- (void)updateWithInt:(int)delta {
  {
    id<JavaUtilIterator> iter__ = [((id<JavaUtilList>) nil_chk(peas_)) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(iter__)) hasNext]) {
      PlaynShowcaseCoreSpritesPea *pea = [((id<JavaUtilIterator>) nil_chk(iter__)) next];
      [((PlaynShowcaseCoreSpritesPea *) nil_chk(pea)) updateWithInt:delta];
    }
  }
}

- (id)init {
  if ((self = [super init])) {
    peas_ = [[JavaUtilArrayList alloc] initWithInt:0];
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynShowcaseCoreSpritesSpritesDemo *typedCopy = (PlaynShowcaseCoreSpritesSpritesDemo *) copy;
  typedCopy.layer = layer_;
  typedCopy.peas = peas_;
  typedCopy.ding = ding_;
}

@end
@implementation PlaynShowcaseCoreSpritesSpritesDemo_$1

@synthesize this$0 = this$0_;

- (void)onPointerEndWithPlaynCorePointer_Event:(id<PlaynCorePointer_Event>)event {
  [this$0_ addPeaWithFloat:[((id<PlaynCorePointer_Event>) nil_chk(event)) x] withFloat:[((id<PlaynCorePointer_Event>) nil_chk(event)) y]];
}

- (id)initWithPlaynShowcaseCoreSpritesSpritesDemo:(PlaynShowcaseCoreSpritesSpritesDemo *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynShowcaseCoreSpritesSpritesDemo_$1 *typedCopy = (PlaynShowcaseCoreSpritesSpritesDemo_$1 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
