//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/playn/showcase/core/text/TextDemo.java
//
//  Created by Thomas on 7/15/13.
//

#import "IOSFloatArray.h"
#import "IOSObjectArray.h"
#import "java/lang/Math.h"
#import "playn/core/Canvas.h"
#import "playn/core/CanvasImage.h"
#import "playn/core/Font.h"
#import "playn/core/Graphics.h"
#import "playn/core/GroupLayer.h"
#import "playn/core/ImageLayer.h"
#import "playn/core/Layer.h"
#import "playn/core/PlayN.h"
#import "playn/core/TextFormat.h"
#import "playn/core/TextLayout.h"
#import "playn/showcase/core/text/TextDemo.h"

@implementation PlaynShowcaseCoreTextTextDemo

@synthesize base = base_;

- (NSString *)name {
  return @"Text";
}

- (void)init__ OBJC_METHOD_FAMILY_NONE {
  base_ = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createGroupLayer];
  [((id<PlaynCoreGroupLayer>) [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) rootLayer]) addWithPlaynCoreLayer:base_];
  id<PlaynCoreCanvasImage> bgtile = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createImageWithFloat:64 withFloat:64];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(bgtile)) canvas]) setFillColorWithInt:(int) 0xFFCCCCCC];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(bgtile)) canvas]) fillRectWithFloat:0 withFloat:0 withFloat:64 withFloat:64];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(bgtile)) canvas]) setStrokeColorWithInt:(int) 0xFFFFFFFF];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(bgtile)) canvas]) strokeRectWithFloat:0 withFloat:0 withFloat:64 withFloat:64];
  [((id<PlaynCoreCanvasImage>) NIL_CHK(bgtile)) setRepeatWithBOOL:YES withBOOL:YES];
  id<PlaynCoreImageLayer> bg = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createImageLayerWithPlaynCoreImage:bgtile];
  [((id<PlaynCoreImageLayer>) NIL_CHK(bg)) setWidthWithFloat:[((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) width]];
  [((id<PlaynCoreImageLayer>) NIL_CHK(bg)) setHeightWithFloat:[((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) height]];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) addWithPlaynCoreLayer:bg];
  float MARGIN = 10;
  float xpos = MARGIN, maxYPos = 0;
  {
    IOSObjectArray *a__ = [IOSObjectArray arrayWithObjects:(id[]){ @"Helvetica", @"Georgia" } count:2 type:[IOSClass classWithClass:[NSString class]]];
    int n__ = (int) [((IOSObjectArray *) NIL_CHK(a__)) count];
    for (int i__ = 0; i__ < n__; i__++) {
      NSString *name = ((NSObject *) [((IOSObjectArray *) NIL_CHK(a__)) objectAtIndex:i__]);
      float ypos = MARGIN, maxWidth = 0;
      {
        IOSObjectArray *a__ = [PlaynCoreFont_StyleEnum values];
        int n__ = (int) [((IOSObjectArray *) NIL_CHK(a__)) count];
        for (int i__ = 0; i__ < n__; i__++) {
          PlaynCoreFont_StyleEnum *style = ((PlaynCoreFont_StyleEnum *) [((IOSObjectArray *) NIL_CHK(a__)) objectAtIndex:i__]);
          {
            IOSFloatArray *a__ = [IOSFloatArray arrayWithFloats:(float[]){ 12.0f, 24.0f, 32.0f } count:3];
            int n__ = (int) [((IOSFloatArray *) NIL_CHK(a__)) count];
            for (int i__ = 0; i__ < n__; i__++) {
              float size = [((IOSFloatArray *) NIL_CHK(a__)) floatAtIndex:i__];
              id<PlaynCoreFont> font = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createFontWithNSString:name withPlaynCoreFont_StyleEnum:style withFloat:size];
              PlaynCoreTextFormat *format = [((PlaynCoreTextFormat *) [[PlaynCoreTextFormat alloc] init]) withFontWithPlaynCoreFont:font];
              id<PlaynCoreTextLayout> layout = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) layoutTextWithNSString:@"Hello PlayN World" withPlaynCoreTextFormat:format];
              id<PlaynCoreLayer> layer = [self createTextLayerWithPlaynCoreTextLayout:layout withInt:(int) 0xFF000000];
              (void) [((id<PlaynCoreLayer>) NIL_CHK(layer)) setTranslationWithFloat:xpos withFloat:ypos];
              [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) addWithPlaynCoreLayer:layer];
              ypos += [((id<PlaynCoreTextLayout>) NIL_CHK(layout)) height];
              maxWidth = [JavaLangMath maxWithFloat:maxWidth withFloat:[((id<PlaynCoreTextLayout>) NIL_CHK(layout)) width]];
              maxYPos = [JavaLangMath maxWithFloat:ypos withFloat:maxYPos];
            }
          }
        }
      }
      xpos += (maxWidth + MARGIN);
    }
  }
  xpos = MARGIN;
  float ypos = maxYPos + MARGIN;
  id<PlaynCoreFont> font = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createFontWithNSString:@"Courier" withPlaynCoreFont_StyleEnum:[PlaynCoreFont_StyleEnum PLAIN] withFloat:16];
  NSString *text = @"Text can also be wrapped at a specified width.\n\nAnd wrapped manually at newlines.\nLike this.";
  id<PlaynCoreTextLayout> layout = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) layoutTextWithNSString:text withPlaynCoreTextFormat:[[((PlaynCoreTextFormat *) [[PlaynCoreTextFormat alloc] init]) withFontWithPlaynCoreFont:font] withWrapWidthWithFloat:200]];
  id<PlaynCoreLayer> layer = [self createTextLayerWithPlaynCoreTextLayout:layout withInt:(int) 0xFF660000];
  (void) [((id<PlaynCoreLayer>) NIL_CHK(layer)) setTranslationWithFloat:xpos withFloat:ypos];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) addWithPlaynCoreLayer:layer];
  xpos += [((id<PlaynCoreTextLayout>) NIL_CHK(layout)) width] + MARGIN;
  ypos += MARGIN;
  text = @"Wrapped text can be center-justified, if so desired.";
  layout = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) layoutTextWithNSString:text withPlaynCoreTextFormat:[[((PlaynCoreTextFormat *) [[PlaynCoreTextFormat alloc] init]) withFontWithPlaynCoreFont:font] withWrappingWithFloat:200 withPlaynCoreTextFormat_AlignmentEnum:[PlaynCoreTextFormat_AlignmentEnum CENTER]]];
  layer = [self createTextLayerWithPlaynCoreTextLayout:layout withInt:(int) 0xFF006600];
  (void) [((id<PlaynCoreLayer>) NIL_CHK(layer)) setTranslationWithFloat:xpos withFloat:ypos];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) addWithPlaynCoreLayer:layer];
  xpos += [((id<PlaynCoreTextLayout>) NIL_CHK(layout)) width] + MARGIN;
  ypos += MARGIN;
  text = @"Or it can be flush to the right, if that's how you like to justify yourself.";
  layout = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) layoutTextWithNSString:text withPlaynCoreTextFormat:[[((PlaynCoreTextFormat *) [[PlaynCoreTextFormat alloc] init]) withFontWithPlaynCoreFont:font] withWrappingWithFloat:200 withPlaynCoreTextFormat_AlignmentEnum:[PlaynCoreTextFormat_AlignmentEnum RIGHT]]];
  layer = [self createTextLayerWithPlaynCoreTextLayout:layout withInt:(int) 0xFF000066];
  (void) [((id<PlaynCoreLayer>) NIL_CHK(layer)) setTranslationWithFloat:xpos withFloat:ypos];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) addWithPlaynCoreLayer:layer];
  xpos += [((id<PlaynCoreTextLayout>) NIL_CHK(layout)) width] + MARGIN;
  ypos += MARGIN;
}

- (void)shutdown {
  [((id<PlaynCoreGroupLayer>) NIL_CHK(base_)) destroy];
  base_ = nil;
}

- (id<PlaynCoreLayer>)createTextLayerWithPlaynCoreTextLayout:(id<PlaynCoreTextLayout>)layout
                                                     withInt:(int)color {
  id<PlaynCoreCanvasImage> image = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createImageWithFloat:(int) [JavaLangMath ceilWithDouble:[((id<PlaynCoreTextLayout>) NIL_CHK(layout)) width]] withFloat:(int) [JavaLangMath ceilWithDouble:[((id<PlaynCoreTextLayout>) NIL_CHK(layout)) height]]];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(image)) canvas]) setFillColorWithInt:color];
  (void) [((id<PlaynCoreCanvas>) [((id<PlaynCoreCanvasImage>) NIL_CHK(image)) canvas]) fillTextWithPlaynCoreTextLayout:layout withFloat:0 withFloat:0];
  return [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createImageLayerWithPlaynCoreImage:image];
}

- (id)init {
  return [super init];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynShowcaseCoreTextTextDemo *typedCopy = (PlaynShowcaseCoreTextTextDemo *) copy;
  typedCopy.base = base_;
}

@end
