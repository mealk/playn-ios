//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/tuxkids/tuxblocks/core/defense/projectile/Lightning.java
//
//  Created by Thomas on 7/25/13.
//

#include "playn/core/Canvas.h"
#include "playn/core/CanvasImage.h"
#include "playn/core/Graphics.h"
#include "playn/core/Image.h"
#include "playn/core/ImageLayer.h"
#include "playn/core/Path.h"
#include "playn/core/util/Clock.h"
#include "pythagoras/f/Transform.h"
#include "tripleplay/util/Colors.h"
#include "tuxkids/tuxblocks/core/PlayNObject.h"
#include "tuxkids/tuxblocks/core/defense/projectile/ChainProjectile.h"
#include "tuxkids/tuxblocks/core/defense/projectile/Lightning.h"

@implementation TuxkidsTuxblocksCoreDefenseProjectileLightning

@synthesize t = t_;
@synthesize timer_Lightning = timer_Lightning_;

- (id)initWithInt:(int)hits
        withFloat:(float)damageReduceFactor
        withFloat:(float)rangeReduceFactor {
  if ((self = [super initWithInt:hits withFloat:damageReduceFactor withFloat:rangeReduceFactor])) {
    t_ = 1;
    timer_Lightning_ = 0;
  }
  return self;
}

- (int)duration {
  return 200;
}

- (id<PlaynCoreImage>)createImage {
  id<PlaynCoreCanvasImage> image = [((id<PlaynCoreGraphics>) nil_chk([TuxkidsTuxblocksCorePlayNObject graphics])) createImageWithFloat:100 withFloat:10];
  id<PlaynCorePath> path = [((id<PlaynCoreCanvas>) nil_chk([((id<PlaynCoreCanvasImage>) nil_chk(image)) canvas])) createPath];
  int n = 5;
  [((id<PlaynCorePath>) nil_chk(path)) moveToWithFloat:0 withFloat:[((id<PlaynCoreCanvasImage>) nil_chk(image)) height] / 2];
  for (int i = 1; i <= n; i++) {
    float x = [((id<PlaynCoreCanvasImage>) nil_chk(image)) width] / n * (i - 0.5f);
    float y = (i % 2) * ([((id<PlaynCoreCanvasImage>) nil_chk(image)) height] - 1) + 0.5f;
    [((id<PlaynCorePath>) nil_chk(path)) lineToWithFloat:x withFloat:y];
  }
  [((id<PlaynCorePath>) nil_chk(path)) lineToWithFloat:[((id<PlaynCoreCanvasImage>) nil_chk(image)) width] - 1 withFloat:[((id<PlaynCoreCanvasImage>) nil_chk(image)) height] / 2];
  (void) [((id<PlaynCoreCanvas>) nil_chk([((id<PlaynCoreCanvasImage>) nil_chk(image)) canvas])) setStrokeColorWithInt:[TripleplayUtilColors BLUE]];
  (void) [((id<PlaynCoreCanvas>) nil_chk([((id<PlaynCoreCanvasImage>) nil_chk(image)) canvas])) strokePathWithPlaynCorePath:path];
  return image;
}

- (void)paintWithPlaynCoreUtilClock:(id<PlaynCoreUtilClock>)clock {
  [super paintWithPlaynCoreUtilClock:clock];
  (void) [((id<PythagorasFTransform>) nil_chk([((id<PlaynCoreImageLayer>) nil_chk(layer__)) transform])) setScaleYWithFloat:[((id<PythagorasFTransform>) nil_chk([((id<PlaynCoreImageLayer>) nil_chk(layer__)) transform])) scaleY] * t_];
  timer_Lightning_ += [((id<PlaynCoreUtilClock>) nil_chk(clock)) dt];
  if (timer_Lightning_ > 50) {
    timer_Lightning_ -= 50;
    t_ *= -1;
  }
}

- (TuxkidsTuxblocksCoreDefenseProjectileChainProjectile *)copy__WithInt:(int)hits
                                                              withFloat:(float)damageReduceFactor
                                                              withFloat:(float)rangeReduceFactor OBJC_METHOD_FAMILY_NONE {
  return [[TuxkidsTuxblocksCoreDefenseProjectileLightning alloc] initWithInt:hits withFloat:damageReduceFactor withFloat:rangeReduceFactor];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TuxkidsTuxblocksCoreDefenseProjectileLightning *typedCopy = (TuxkidsTuxblocksCoreDefenseProjectileLightning *) copy;
  typedCopy.t = t_;
  typedCopy.timer_Lightning = timer_Lightning_;
}

@end
