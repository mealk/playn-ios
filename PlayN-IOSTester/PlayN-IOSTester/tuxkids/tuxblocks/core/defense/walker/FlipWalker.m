//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/tuxkids/tuxblocks/core/defense/walker/FlipWalker.java
//
//  Created by Thomas on 7/25/13.
//

#include "java/lang/Math.h"
#include "pythagoras/f/FloatMath.h"
#include "pythagoras/i/Point.h"
#include "tuxkids/tuxblocks/core/ImageLayerTintable.h"
#include "tuxkids/tuxblocks/core/defense/Grid.h"
#include "tuxkids/tuxblocks/core/defense/walker/FlipWalker.h"
#include "tuxkids/tuxblocks/core/defense/walker/Walker.h"

@implementation TuxkidsTuxblocksCoreDefenseWalkerFlipWalker

- (id)initWithInt:(int)maxHp
          withInt:(int)walkCellTime {
  return [super initWithInt:maxHp withInt:walkCellTime];
}

- (void)updateMovementWithFloat:(float)perc {
  int dx = -(((PythagorasIPoint *) nil_chk(coordinates__)).y_ - ((PythagorasIPoint *) nil_chk(lastCoordinates_)).y_);
  int dy = -(((PythagorasIPoint *) nil_chk(coordinates__)).x_ - ((PythagorasIPoint *) nil_chk(lastCoordinates_)).x_);
  float x = [JavaLangMath maxWithInt:((PythagorasIPoint *) nil_chk(coordinates__)).y_ withInt:((PythagorasIPoint *) nil_chk(lastCoordinates_)).y_] * [((TuxkidsTuxblocksCoreDefenseGrid *) nil_chk(grid_)) cellSize];
  float y = [JavaLangMath maxWithInt:((PythagorasIPoint *) nil_chk(coordinates__)).x_ withInt:((PythagorasIPoint *) nil_chk(lastCoordinates_)).x_] * [((TuxkidsTuxblocksCoreDefenseGrid *) nil_chk(grid_)) cellSize];
  [((TuxkidsTuxblocksCoreImageLayerTintable *) nil_chk(layer__)) setTranslationWithFloat:x withFloat:y];
  float scaleX = dx * [PythagorasFFloatMath cosWithFloat:PythagorasFFloatMath_PI * perc];
  if (dx == 0) scaleX = 1;
  float scaleY = dy * [PythagorasFFloatMath cosWithFloat:PythagorasFFloatMath_PI * perc];
  if (dy == 0) scaleY = 1;
  [((TuxkidsTuxblocksCoreImageLayerTintable *) nil_chk(layer__)) setScaleWithFloat:scaleX withFloat:scaleY];
}

- (TuxkidsTuxblocksCoreDefenseWalkerWalker *)copy__ OBJC_METHOD_FAMILY_NONE {
  return [[TuxkidsTuxblocksCoreDefenseWalkerFlipWalker alloc] initWithInt:maxHp_ withInt:walkCellTime__];
}

@end
