//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/tuxkids/tuxblocks/core/defense/walker/ShrinkWalker.java
//
//  Created by Thomas on 7/26/13.
//

#include "java/lang/Math.h"
#include "pythagoras/f/FloatMath.h"
#include "pythagoras/i/Point.h"
#include "tuxkids/tuxblocks/core/defense/Grid.h"
#include "tuxkids/tuxblocks/core/defense/walker/ShrinkWalker.h"
#include "tuxkids/tuxblocks/core/defense/walker/Walker.h"
#include "tuxkids/tuxblocks/core/layers/ImageLayerTintable.h"

@implementation TuxkidsTuxblocksCoreDefenseWalkerShrinkWalker

- (id)initWithInt:(int)maxHp
          withInt:(int)walkCellTime {
  return [super initWithInt:maxHp withInt:walkCellTime];
}

- (void)updateMovementWithFloat:(float)perc {
  PythagorasIPoint *coords;
  if (perc < 0.5f) {
    coords = lastCoordinates_;
  }
  else {
    coords = coordinates__;
  }
  [((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) setOriginWithFloat:[((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) width] / 2 withFloat:[((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) height] / 2];
  [((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) setScaleWithFloat:[JavaLangMath absWithFloat:[PythagorasFFloatMath cosWithFloat:PythagorasFFloatMath_PI * perc]]];
  [((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) setTranslationWithFloat:((PythagorasIPoint *) nil_chk(coords)).y_ * [((TuxkidsTuxblocksCoreDefenseGrid *) nil_chk(grid_)) cellSize] + [((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) originX] withFloat:((PythagorasIPoint *) nil_chk(coords)).x_ * [((TuxkidsTuxblocksCoreDefenseGrid *) nil_chk(grid_)) cellSize] + [((TuxkidsTuxblocksCoreLayersImageLayerTintable *) nil_chk(layer__)) originY]];
}

- (TuxkidsTuxblocksCoreDefenseWalkerWalker *)copy__ OBJC_METHOD_FAMILY_NONE {
  return [[TuxkidsTuxblocksCoreDefenseWalkerShrinkWalker alloc] initWithInt:maxHp_ withInt:walkCellTime__];
}

@end
