//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/tuxkids/tuxblocks/core/utils/Debug.java
//
//  Created by Thomas on 7/26/13.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "java/lang/Exception.h"
#include "java/lang/StackTraceElement.h"
#include "playn/core/Log.h"
#include "playn/core/PlayN.h"
#include "tuxkids/tuxblocks/core/PlayNObject.h"
#include "tuxkids/tuxblocks/core/utils/Debug.h"
#include "tuxkids/tuxblocks/core/utils/Formatter.h"

@implementation TuxkidsTuxblocksCoreUtilsDebug

static BOOL TuxkidsTuxblocksCoreUtilsDebug_DEBUG__;
static BOOL TuxkidsTuxblocksCoreUtilsDebug_SHOW_TRACE_;

+ (BOOL)getDEBUG {
  return TuxkidsTuxblocksCoreUtilsDebug_DEBUG__;
}

+ (BOOL *)getDEBUGRef {
  return &TuxkidsTuxblocksCoreUtilsDebug_DEBUG__;
}

+ (BOOL)SHOW_TRACE {
  return TuxkidsTuxblocksCoreUtilsDebug_SHOW_TRACE_;
}

+ (BOOL *)SHOW_TRACERef {
  return &TuxkidsTuxblocksCoreUtilsDebug_SHOW_TRACE_;
}

+ (void)writeWithLongInt:(long long int)x {
  [TuxkidsTuxblocksCoreUtilsDebug writeWithNSString:[NSString stringWithFormat:@"%qi", x]];
}

+ (void)writeWithInt:(int)x {
  [TuxkidsTuxblocksCoreUtilsDebug writeWithNSString:[NSString stringWithFormat:@"%d", x]];
}

+ (void)writeWithId:(id)o {
  [TuxkidsTuxblocksCoreUtilsDebug writeWithNSString:o == nil ? @"null" : [nil_chk(o) description]];
}

+ (void)writeWithFloat:(float)x {
  [TuxkidsTuxblocksCoreUtilsDebug writeWithNSString:[NSString stringWithFormat:@"%f", x]];
}

+ (void)writeWithNSString:(NSString *)format
        withNSObjectArray:(IOSObjectArray *)args {
  @try {
    [TuxkidsTuxblocksCoreUtilsDebug writeWithNSString:[TuxkidsTuxblocksCoreUtilsFormatter formatWithNSString:format withNSObjectArray:args]];
  }
  @catch (JavaLangException *e) {
    [TuxkidsTuxblocksCoreUtilsDebug writeWithJavaLangException:e];
  }
}

+ (void)writeWithJavaLangException:(JavaLangException *)e {
  if (TuxkidsTuxblocksCoreUtilsDebug_DEBUG__) [((JavaLangException *) nil_chk(e)) printStackTrace];
}

+ (void)writeWithNSString:(NSString *)text {
  if (!TuxkidsTuxblocksCoreUtilsDebug_DEBUG__) return;
  if (TuxkidsTuxblocksCoreUtilsDebug_SHOW_TRACE_) {
    @try {
      @throw [[JavaLangException alloc] initWithNSString:@"Who called me?"];
    }
    @catch (JavaLangException *e) {
      int i = 1;
      while ([((NSString *) nil_chk([((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getClassName])) isEqual:[[IOSClass classWithClass:[TuxkidsTuxblocksCoreUtilsDebug class]] getName]] && [((NSString *) nil_chk([((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getMethodName])) isEqual:@"write"]) i++;
      while ([((NSString *) nil_chk([((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getClassName])) isEqual:[[IOSClass classWithClass:[TuxkidsTuxblocksCorePlayNObject class]] getName]] && [((NSString *) nil_chk([((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getMethodName])) isEqual:@"debug"]) i++;
      NSString *cName = [((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getClassName];
      int index = [((NSString *) nil_chk(cName)) lastIndexOfString:@"."];
      if (index > 0 && index < [((NSString *) nil_chk(cName)) length] - 1) cName = [((NSString *) nil_chk(cName)) substring:index + 1];
      text = [NSString stringWithFormat:@"%@.%@(): %@", cName, [((JavaLangStackTraceElement *) nil_chk([((IOSObjectArray *) nil_chk([((JavaLangException *) nil_chk(e)) getStackTrace])) objectAtIndex:i])) getMethodName], text];
    }
  }
  [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) debugWithNSString:text];
}

- (id)init {
  return [super init];
}

+ (void)initialize {
  if (self == [TuxkidsTuxblocksCoreUtilsDebug class]) {
    TuxkidsTuxblocksCoreUtilsDebug_DEBUG__ = YES;
    TuxkidsTuxblocksCoreUtilsDebug_SHOW_TRACE_ = NO;
  }
}

@end
