//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: core/src/main/java/tuxkids/tuxblocks/core/solve/expression/Over.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSObjectArray.h"
#import "java/lang/Integer.h"
#import "playn/core/Canvas.h"
#import "playn/core/Color.h"
#import "playn/core/Graphics.h"
#import "playn/core/PlayN.h"
#import "playn/core/TextFormat.h"
#import "playn/core/TextLayout.h"
#import "pythagoras/f/Vector.h"
#import "tuxkids/tuxblocks/core/solve/expression/Expression.h"
#import "tuxkids/tuxblocks/core/solve/expression/ExpressionWriter.h"
#import "tuxkids/tuxblocks/core/solve/expression/ModificationOperation.h"
#import "tuxkids/tuxblocks/core/solve/expression/Over.h"
#import "tuxkids/tuxblocks/core/solve/expression/Times.h"
#import "tuxkids/tuxblocks/core/utils/Formatter.h"

@implementation TuxkidsTuxblocksCoreSolveExpressionOver

- (id)initWithTuxkidsTuxblocksCoreSolveExpressionExpression:(TuxkidsTuxblocksCoreSolveExpressionExpression *)base
                                                    withInt:(int)value {
  return [super initWithTuxkidsTuxblocksCoreSolveExpressionExpression:base withInt:value];
}

- (NSString *)toMathString {
  if ([((TuxkidsTuxblocksCoreSolveExpressionExpression *) NIL_CHK(operand_)) getPrecedence] < [self getPrecedence]) {
    return [TuxkidsTuxblocksCoreUtilsFormatter formatWithNSString:@"(%s) %s %d" withNSObjectArray:[IOSObjectArray arrayWithType:[IOSClass classWithClass:[NSObject class]] count:3, [((TuxkidsTuxblocksCoreSolveExpressionExpression *) NIL_CHK(operand_)) toMathString], [self getSymbol], [JavaLangInteger valueOfWithInt:value_] ]];
  }
  else {
    return [TuxkidsTuxblocksCoreUtilsFormatter formatWithNSString:@"%s %s %d" withNSObjectArray:[IOSObjectArray arrayWithType:[IOSClass classWithClass:[NSObject class]] count:3, [((TuxkidsTuxblocksCoreSolveExpressionExpression *) NIL_CHK(operand_)) toMathString], [self getSymbol], [JavaLangInteger valueOfWithInt:value_] ]];
  }
}

- (int)evaluate {
  return [((TuxkidsTuxblocksCoreSolveExpressionExpression *) NIL_CHK(operand_)) evaluate] / value_;
}

- (int)getPrecedence {
  return TuxkidsTuxblocksCoreSolveExpressionExpression_PREC_MULT;
}

- (NSString *)getSymbol {
  return @"/";
}

- (BOOL)isCommutative {
  return NO;
}

- (int)getColor {
  return [PlaynCoreColor rgbWithInt:0 withInt:204 withInt:0];
}

- (TuxkidsTuxblocksCoreSolveExpressionModificationOperation *)getInverse {
  return [[TuxkidsTuxblocksCoreSolveExpressionTimes alloc] initWithTuxkidsTuxblocksCoreSolveExpressionExpression:operand_ withInt:value_];
}

- (TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *)getExpressionWriterWithPlaynCoreTextFormat:(PlaynCoreTextFormat *)textFormat {
  TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *childWriter = [((TuxkidsTuxblocksCoreSolveExpressionExpression *) NIL_CHK(operand_)) getExpressionWriterWithPlaynCoreTextFormat:textFormat];
  return [[TuxkidsTuxblocksCoreSolveExpressionOver_$1 alloc] initWithTuxkidsTuxblocksCoreSolveExpressionOver:self withPlaynCoreTextFormat:textFormat withTuxkidsTuxblocksCoreSolveExpressionExpressionWriter:childWriter];
}

@end
@implementation TuxkidsTuxblocksCoreSolveExpressionOver_$1

@synthesize this$0 = this$0_;
@synthesize divisorLayout = divisorLayout_;
@synthesize val$childWriter = val$childWriter_;

- (PythagorasFVector *)formatExpressionWithPlaynCoreTextFormat:(PlaynCoreTextFormat *)textFormat {
  divisorLayout_ = [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) layoutTextWithNSString:[NSString stringWithFormat:@"%d", this$0_.value] withPlaynCoreTextFormat:textFormat];
  return [[PythagorasFVector alloc] initWithFloat:[((TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *) NIL_CHK(val$childWriter_)) width] withFloat:[((TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *) NIL_CHK(val$childWriter_)) height] + [((id<PlaynCoreTextLayout>) NIL_CHK(divisorLayout_)) height] + TuxkidsTuxblocksCoreSolveExpressionExpressionWriter_SPACING * 2];
}

- (void)drawExpressionWithPlaynCoreCanvas:(id<PlaynCoreCanvas>)canvas
                                  withInt:(int)childColor {
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) save];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) setFillColorWithInt:childColor];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) setStrokeColorWithInt:childColor];
  [((TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *) NIL_CHK(val$childWriter_)) drawExpressionWithPlaynCoreCanvas:canvas withInt:childColor];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) restore];
  float y = [((TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *) NIL_CHK(val$childWriter_)) height] + TuxkidsTuxblocksCoreSolveExpressionExpressionWriter_SPACING;
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) drawLineWithFloat:0 withFloat:y withFloat:[((TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *) NIL_CHK(val$childWriter_)) width] withFloat:y];
  (void) [((id<PlaynCoreCanvas>) NIL_CHK(canvas)) fillTextWithPlaynCoreTextLayout:divisorLayout_ withFloat:([self width] - [((id<PlaynCoreTextLayout>) NIL_CHK(divisorLayout_)) width]) / 2 withFloat:y + TuxkidsTuxblocksCoreSolveExpressionExpressionWriter_SPACING];
}

- (id)initWithTuxkidsTuxblocksCoreSolveExpressionOver:(TuxkidsTuxblocksCoreSolveExpressionOver *)outer$
                              withPlaynCoreTextFormat:(PlaynCoreTextFormat *)arg$0
withTuxkidsTuxblocksCoreSolveExpressionExpressionWriter:(TuxkidsTuxblocksCoreSolveExpressionExpressionWriter *)capture$0 {
  if ((self = [super initWithPlaynCoreTextFormat:arg$0])) {
    this$0_ = outer$;
    val$childWriter_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TuxkidsTuxblocksCoreSolveExpressionOver_$1 *typedCopy = (TuxkidsTuxblocksCoreSolveExpressionOver_$1 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.divisorLayout = divisorLayout_;
  typedCopy.val$childWriter = val$childWriter_;
}

@end
