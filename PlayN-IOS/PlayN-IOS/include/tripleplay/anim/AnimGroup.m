//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: tripleplay/anim/AnimGroup.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSObjectArray.h"
#import "java/lang/Float.h"
#import "java/lang/IllegalStateException.h"
#import "java/lang/Math.h"
#import "java/util/ArrayList.h"
#import "java/util/List.h"
#import "tripleplay/anim/AnimGroup.h"
#import "tripleplay/anim/Animation.h"
#import "tripleplay/anim/Animator.h"

@implementation TripleplayAnimAnimGroup

@synthesize _anims = _anims_;

- (id)addWithId:(TripleplayAnimAnimation *)anim {
  if (_anims_ == nil) @throw [[JavaLangIllegalStateException alloc] initWithNSString:@"AnimGroup already animated."];
  [((id<JavaUtilList>) NIL_CHK(_anims_)) addWithId:anim];
  return anim;
}

- (TripleplayAnimAnimation *)toAnim {
  IOSObjectArray *groupAnims = [((id<JavaUtilList>) NIL_CHK(_anims_)) toArrayWithNSObjectArray:[[IOSObjectArray alloc] initWithLength:[((id<JavaUtilList>) NIL_CHK(_anims_)) size] type:[IOSClass classWithClass:[TripleplayAnimAnimation class]]]];
  _anims_ = nil;
  return [[TripleplayAnimAnimGroup_$1 alloc] initWithTripleplayAnimAnimationArray:groupAnims];
}

- (id)init {
  if ((self = [super init])) {
    _anims_ = [[JavaUtilArrayList alloc] init];
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayAnimAnimGroup *typedCopy = (TripleplayAnimAnimGroup *) copy;
  typedCopy._anims = _anims_;
}

@end
@implementation TripleplayAnimAnimGroup_$1

@synthesize _animator = _animator_;
@synthesize _curAnims = _curAnims_;
@synthesize val$groupAnims = val$groupAnims_;

- (void)init__WithFloat:(float)time OBJC_METHOD_FAMILY_NONE {
  [super init__WithFloat:time];
  for (int ii = 0; ii < (int) [((IOSObjectArray *) NIL_CHK(val$groupAnims_)) count]; ii++) {
    [([((IOSObjectArray *) NIL_CHK(_curAnims_)) replaceObjectAtIndex:ii withObject:((TripleplayAnimAnimation *) [((IOSObjectArray *) NIL_CHK(val$groupAnims_)) objectAtIndex:ii])]) init__WithFloat:time];
  }
}

- (float)applyWithTripleplayAnimAnimator:(TripleplayAnimAnimator *)animator
                               withFloat:(float)time {
  _animator_ = animator;
  return (float) [super applyWithTripleplayAnimAnimator:animator withFloat:time];
}

- (float)applyWithFloat:(float)time {
  float remain = JavaLangFloat_NEGATIVE_INFINITY;
  int processed = 0;
  for (int ii = 0; ii < (int) [((IOSObjectArray *) NIL_CHK(_curAnims_)) count]; ii++) {
    TripleplayAnimAnimation *anim = ((TripleplayAnimAnimation *) [((IOSObjectArray *) NIL_CHK(_curAnims_)) objectAtIndex:ii]);
    if (anim == nil) continue;
    float aremain = [((TripleplayAnimAnimation *) NIL_CHK(anim)) applyWithTripleplayAnimAnimator:_animator_ withFloat:time];
    if (aremain <= 0) [((IOSObjectArray *) NIL_CHK(_curAnims_)) replaceObjectAtIndex:ii withObject:nil];
    remain = [JavaLangMath maxWithFloat:remain withFloat:aremain];
    processed++;
  }
  return processed == 0 ? 0 : remain;
}

- (id)initWithTripleplayAnimAnimationArray:(IOSObjectArray *)capture$0 {
  if ((self = [super init])) {
    val$groupAnims_ = capture$0;
    _curAnims_ = [[IOSObjectArray alloc] initWithLength:(int) [((IOSObjectArray *) NIL_CHK(val$groupAnims_)) count] type:[IOSClass classWithClass:[TripleplayAnimAnimation class]]];
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayAnimAnimGroup_$1 *typedCopy = (TripleplayAnimAnimGroup_$1 *) copy;
  typedCopy._animator = _animator_;
  typedCopy._curAnims = _curAnims_;
  typedCopy.val$groupAnims = val$groupAnims_;
}

@end
