//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: tripleplay/ui/Elements.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSObjectArray.h"
#import "java/util/ArrayList.h"
#import "java/util/Arrays.h"
#import "java/util/Collections.h"
#import "java/util/Iterator.h"
#import "java/util/List.h"
#import "playn/core/GroupLayer.h"
#import "pythagoras/f/Dimension.h"
#import "react/Signal.h"
#import "react/SignalView.h"
#import "tripleplay/ui/Element.h"
#import "tripleplay/ui/Elements.h"
#import "tripleplay/ui/Layout.h"
#import "tripleplay/ui/Stylesheet.h"

@implementation TripleplayUiElements

@synthesize _layout = _layout_;
@synthesize _children = _children_;
@synthesize _childAdded = _childAdded_;
@synthesize _childRemoved = _childRemoved_;
@synthesize _sheet = _sheet_;

- (id)initWithTripleplayUiLayout:(TripleplayUiLayout *)layout {
  if ((self = [super init])) {
    _children_ = [[JavaUtilArrayList alloc] init];
    _childAdded_ = ((ReactSignal *) [ReactSignal create]);
    _childRemoved_ = ((ReactSignal *) [ReactSignal create]);
    _layout_ = layout;
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum HIT_DESCEND] withBOOL:YES];
  }
  return self;
}

- (id<ReactSignalView>)childAdded {
  return _childAdded_;
}

- (id<ReactSignalView>)childRemoved {
  return _childRemoved_;
}

- (TripleplayUiStylesheet *)stylesheet {
  return _sheet_;
}

- (id)setStylesheetWithTripleplayUiStylesheet:(TripleplayUiStylesheet *)sheet {
  _sheet_ = sheet;
  return ((TripleplayUiElements *) [self asT]);
}

- (int)childCount {
  return [((id<JavaUtilList>) NIL_CHK(_children_)) size];
}

- (TripleplayUiElement *)childAtWithInt:(int)index {
  return (TripleplayUiElement *) ((TripleplayUiElement *) [((id<JavaUtilList>) NIL_CHK(_children_)) getWithInt:index]);
}

- (id)addWithTripleplayUiElementArray:(IOSObjectArray *)children {
  {
    IOSObjectArray *a__ = children;
    int n__ = (int) [((IOSObjectArray *) NIL_CHK(a__)) count];
    for (int i__ = 0; i__ < n__; i__++) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((IOSObjectArray *) NIL_CHK(a__)) objectAtIndex:i__]);
      TripleplayUiElements *parent = [((TripleplayUiElement *) NIL_CHK(child)) parent];
      if (parent != nil) {
        [parent removeWithTripleplayUiElement:child];
      }
    }
  }
  [((id<JavaUtilList>) NIL_CHK(_children_)) addAllWithJavaUtilCollection:((id<JavaUtilList>) [JavaUtilArrays asListWithNSObjectArray:children])];
  {
    IOSObjectArray *a__ = children;
    int n__ = (int) [((IOSObjectArray *) NIL_CHK(a__)) count];
    for (int i__ = 0; i__ < n__; i__++) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((IOSObjectArray *) NIL_CHK(a__)) objectAtIndex:i__]);
      [self didAddWithTripleplayUiElement:child];
    }
  }
  [self invalidate];
  return ((TripleplayUiElements *) [self asT]);
}

- (id)addWithInt:(int)index
withTripleplayUiElement:(TripleplayUiElement *)child {
  TripleplayUiElements *parent = [((TripleplayUiElement *) NIL_CHK(child)) parent];
  if (parent != nil) {
    [parent removeWithTripleplayUiElement:child];
  }
  [((id<JavaUtilList>) NIL_CHK(_children_)) addWithInt:index withId:child];
  [self didAddWithTripleplayUiElement:child];
  [self invalidate];
  return ((TripleplayUiElements *) [self asT]);
}

- (void)removeWithTripleplayUiElement:(TripleplayUiElement *)child {
  if ([((id<JavaUtilList>) NIL_CHK(_children_)) removeWithId:child]) {
    [self didRemoveWithTripleplayUiElement:child withBOOL:NO];
    [self invalidate];
  }
}

- (void)destroyWithTripleplayUiElement:(TripleplayUiElement *)child {
  if ([((id<JavaUtilList>) NIL_CHK(_children_)) removeWithId:child]) {
    [self didRemoveWithTripleplayUiElement:child withBOOL:YES];
    [self invalidate];
  }
  else {
    [((id<PlaynCoreGroupLayer>) NIL_CHK(child.layer)) destroy];
  }
}

- (void)removeAtWithInt:(int)index {
  [self didRemoveWithTripleplayUiElement:((TripleplayUiElement *) [((id<JavaUtilList>) NIL_CHK(_children_)) removeWithInt:index]) withBOOL:NO];
  [self invalidate];
}

- (void)destroyAtWithInt:(int)index {
  [self didRemoveWithTripleplayUiElement:((TripleplayUiElement *) [((id<JavaUtilList>) NIL_CHK(_children_)) removeWithInt:index]) withBOOL:YES];
  [self invalidate];
}

- (void)removeAll {
  while (![((id<JavaUtilList>) NIL_CHK(_children_)) isEmpty]) {
    [self removeAtWithInt:[((id<JavaUtilList>) NIL_CHK(_children_)) size] - 1];
  }
  [self invalidate];
}

- (void)destroyAll {
  while (![((id<JavaUtilList>) NIL_CHK(_children_)) isEmpty]) {
    [self destroyAtWithInt:[((id<JavaUtilList>) NIL_CHK(_children_)) size] - 1];
  }
  [self invalidate];
}

- (id<JavaUtilIterator>)iterator {
  return ((id<JavaUtilIterator>) [((id<JavaUtilList>) [JavaUtilCollections unmodifiableListWithJavaUtilList:_children_]) iterator]);
}

- (void)didAddWithTripleplayUiElement:(TripleplayUiElement *)child {
  [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) addWithPlaynCoreLayer:((TripleplayUiElement *) NIL_CHK(child)).layer];
  [((TripleplayUiElement *) NIL_CHK(child)) wasParentedWithTripleplayUiElements:self];
  if ([self isAdded] && ![((TripleplayUiElement *) NIL_CHK(child)) willAdd]) {
    [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_ADDING] withBOOL:YES];
    [((TripleplayUiElement *) NIL_CHK(child)) wasAdded];
  }
  [((ReactSignal *) NIL_CHK(_childAdded_)) emitWithId:child];
}

- (void)didRemoveWithTripleplayUiElement:(TripleplayUiElement *)child
                                withBOOL:(BOOL)destroy {
  if (destroy) [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum WILL_DESTROY] withBOOL:YES];
  [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) removeWithPlaynCoreLayer:((TripleplayUiElement *) NIL_CHK(child)).layer];
  BOOL needsRemove = [((TripleplayUiElement *) NIL_CHK(child)) willRemove];
  [((TripleplayUiElement *) NIL_CHK(child)) wasUnparented];
  if ([self isAdded] || needsRemove) {
    [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_REMOVING] withBOOL:YES];
    [((TripleplayUiElement *) NIL_CHK(child)) wasRemoved];
  }
  if (destroy) [((id<PlaynCoreGroupLayer>) NIL_CHK(child.layer)) destroy];
  [((ReactSignal *) NIL_CHK(_childRemoved_)) emitWithId:child];
}

- (void)wasAdded {
  [super wasAdded];
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_children_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_ADDING] withBOOL:YES];
      [((TripleplayUiElement *) NIL_CHK(child)) wasAdded];
    }
  }
}

- (void)wasRemoved {
  [super wasRemoved];
  BOOL willDestroy = [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum WILL_DESTROY]];
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_children_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      if (willDestroy) [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum WILL_DESTROY] withBOOL:YES];
      [((TripleplayUiElement *) NIL_CHK(child)) setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_REMOVING] withBOOL:YES];
      [((TripleplayUiElement *) NIL_CHK(child)) wasRemoved];
    }
  }
}

- (TripleplayUiElement_LayoutData *)createLayoutDataWithFloat:(float)hintX
                                                    withFloat:(float)hintY {
  return [[TripleplayUiElements_ElementsLayoutData alloc] initWithTripleplayUiElements:self];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElements *typedCopy = (TripleplayUiElements *) copy;
  typedCopy._layout = _layout_;
  typedCopy._children = _children_;
  typedCopy._childAdded = _childAdded_;
  typedCopy._childRemoved = _childRemoved_;
  typedCopy._sheet = _sheet_;
}

@end
@implementation TripleplayUiElements_ElementsLayoutData

@synthesize this$2 = this$2_;

- (PythagorasFDimension *)computeSizeWithFloat:(float)hintX
                                     withFloat:(float)hintY {
  return [((TripleplayUiLayout *) NIL_CHK(this$2_._layout)) computeSizeWithTripleplayUiElements:this$2_ withFloat:hintX withFloat:hintY];
}

- (void)layoutWithFloat:(float)left
              withFloat:(float)top
              withFloat:(float)width
              withFloat:(float)height {
  [((TripleplayUiLayout *) NIL_CHK(this$2_._layout)) layoutWithTripleplayUiElements:this$2_ withFloat:left withFloat:top withFloat:width withFloat:height];
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(this$2_._children)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      TripleplayUiElement *child = ((TripleplayUiElement *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((TripleplayUiElement *) NIL_CHK(child)) validate];
    }
  }
}

- (id)initWithTripleplayUiElements:(TripleplayUiElements *)outer$ {
  if ((self = [super initWithTripleplayUiElement:outer$])) {
    this$2_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElements_ElementsLayoutData *typedCopy = (TripleplayUiElements_ElementsLayoutData *) copy;
  typedCopy.this$2 = this$2_;
}

@end
