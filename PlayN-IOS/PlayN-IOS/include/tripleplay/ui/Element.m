//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: tripleplay/ui/Element.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSClass.h"
#import "IOSObjectArray.h"
#import "java/lang/Boolean.h"
#import "java/lang/IllegalArgumentException.h"
#import "java/lang/Math.h"
#import "playn/core/Graphics.h"
#import "playn/core/GroupLayer.h"
#import "playn/core/Layer.h"
#import "playn/core/PlayN.h"
#import "pythagoras/f/Dimension.h"
#import "pythagoras/f/IDimension.h"
#import "pythagoras/f/MathUtil.h"
#import "pythagoras/f/Point.h"
#import "pythagoras/f/Rectangle.h"
#import "react/Signal.h"
#import "react/SignalView.h"
#import "react/Slot.h"
#import "react/UnitSlot.h"
#import "tripleplay/ui/Background.h"
#import "tripleplay/ui/Element.h"
#import "tripleplay/ui/Elements.h"
#import "tripleplay/ui/Layout.h"
#import "tripleplay/ui/Root.h"
#import "tripleplay/ui/Style.h"
#import "tripleplay/ui/Styles.h"
#import "tripleplay/util/Ref.h"

@implementation TripleplayUiElement

@synthesize layer = layer_;
@synthesize _flags = _flags_;
@synthesize _parent = _parent_;
@synthesize _preferredSize = _preferredSize_;
@synthesize _size = _size_;
@synthesize _styles = _styles_;
@synthesize _constraint = _constraint_;
@synthesize _hierarchyChanged = _hierarchyChanged_;
@synthesize _ldata = _ldata_;
@synthesize _bginst = _bginst_;

- (id)init {
  if ((self = [super init])) {
    layer_ = [self createLayer];
    _flags_ = ((TripleplayUiElement_FlagEnum *) NIL_CHK([TripleplayUiElement_FlagEnum VISIBLE])).mask | ((TripleplayUiElement_FlagEnum *) NIL_CHK([TripleplayUiElement_FlagEnum ENABLED])).mask;
    _size_ = [[PythagorasFDimension alloc] init];
    _styles_ = [TripleplayUiStyles none];
    _bginst_ = ((TripleplayUtilRef *) [TripleplayUtilRef createWithId:nil]);
    (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) setHitTesterWithPlaynCoreLayer_HitTester:[[TripleplayUiElement_$1 alloc] initWithTripleplayUiElement:self]];
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum HIT_DESCEND] withBOOL:YES];
  }
  return self;
}

- (float)x {
  return [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) tx];
}

- (float)y {
  return [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) ty];
}

- (id<PythagorasFIDimension>)size {
  return _size_;
}

- (PythagorasFPoint *)locationWithPythagorasFPoint:(PythagorasFPoint *)loc {
  return [((PythagorasFPoint *) NIL_CHK(loc)) setWithFloat:[self x] withFloat:[self y]];
}

- (PythagorasFRectangle *)boundsWithPythagorasFRectangle:(PythagorasFRectangle *)bounds {
  [((PythagorasFRectangle *) NIL_CHK(bounds)) setBoundsWithFloat:[self x] withFloat:[self y] withFloat:((PythagorasFDimension *) NIL_CHK(_size_)).width_ withFloat:((PythagorasFDimension *) NIL_CHK(_size_)).height_];
  return bounds;
}

- (TripleplayUiElements *)parent {
  return _parent_;
}

- (id<ReactSignalView>)hierarchyChanged {
  if (_hierarchyChanged_ == nil) _hierarchyChanged_ = ((ReactSignal *) [ReactSignal create]);
  return _hierarchyChanged_;
}

- (TripleplayUiStyles *)styles {
  return _styles_;
}

- (id)setStylesWithTripleplayUiStyles:(TripleplayUiStyles *)styles {
  _styles_ = styles;
  [self clearLayoutData];
  [self invalidate];
  return [self asT];
}

- (id)setStylesWithTripleplayUiStyle_BindingArray:(IOSObjectArray *)styles {
  return [self setStylesWithTripleplayUiStyles:[TripleplayUiStyles makeWithTripleplayUiStyle_BindingArray:styles]];
}

- (id)addStylesWithTripleplayUiStyles:(TripleplayUiStyles *)styles {
  _styles_ = [((TripleplayUiStyles *) NIL_CHK(_styles_)) mergeWithTripleplayUiStyles:styles];
  [self clearLayoutData];
  [self invalidate];
  return [self asT];
}

- (id)addStylesWithTripleplayUiStyle_BindingArray:(IOSObjectArray *)styles {
  return [self addStylesWithTripleplayUiStyles:[TripleplayUiStyles makeWithTripleplayUiStyle_BindingArray:styles]];
}

- (id)asT {
  return (TripleplayUiElement *) self;
}

- (BOOL)isEnabled {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum ENABLED]];
}

- (id)setEnabledWithBOOL:(BOOL)enabled {
  if (enabled != [self isEnabled]) {
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum ENABLED] withBOOL:enabled];
    [self clearLayoutData];
    [self invalidate];
  }
  return [self asT];
}

- (ReactSlot *)enabledSlot {
  return [[TripleplayUiElement_$2 alloc] initWithTripleplayUiElement:self];
}

- (BOOL)isVisible {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VISIBLE]];
}

- (id)setVisibleWithBOOL:(BOOL)visible {
  if (visible != [self isVisible]) {
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VISIBLE] withBOOL:visible];
    (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) setVisibleWithBOOL:visible];
    [self invalidate];
  }
  return [self asT];
}

- (ReactSlot *)visibleSlot {
  return [[TripleplayUiElement_$3 alloc] initWithTripleplayUiElement:self];
}

- (BOOL)isShowing {
  TripleplayUiElements *parent;
  return [self isVisible] && ((parent = [self parent]) != nil) && [((TripleplayUiElements *) NIL_CHK(parent)) isShowing];
}

- (TripleplayUiLayout_Constraint *)constraint {
  return _constraint_;
}

- (id)setConstraintWithTripleplayUiLayout_Constraint:(TripleplayUiLayout_Constraint *)constraint {
  if (constraint != nil) [constraint setElementWithTripleplayUiElement:self];
  _constraint_ = constraint;
  [self invalidate];
  return [self asT];
}

- (BOOL)isAdded {
  return [self root] != nil;
}

- (IOSClass *)getStyleClass {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)wasParentedWithTripleplayUiElements:(TripleplayUiElements *)parent {
  _parent_ = parent;
}

- (void)wasUnparented {
  _parent_ = nil;
}

- (void)wasAdded {
  if (_hierarchyChanged_ != nil) [_hierarchyChanged_ emitWithId:[JavaLangBoolean getTRUE]];
  [self invalidate];
  [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_ADDING] withBOOL:NO];
}

- (void)wasRemoved {
  [((TripleplayUtilRef *) NIL_CHK(_bginst_)) clear];
  if (_hierarchyChanged_ != nil) [_hierarchyChanged_ emitWithId:[JavaLangBoolean getFALSE]];
  [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_REMOVING] withBOOL:NO];
}

- (BOOL)containsWithFloat:(float)x
                withFloat:(float)y {
  return !(x < 0 || x > ((PythagorasFDimension *) NIL_CHK(_size_)).width_ || y < 0 || y > ((PythagorasFDimension *) NIL_CHK(_size_)).height_);
}

- (BOOL)isSelected {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum SELECTED]];
}

- (void)invalidate {
  _preferredSize_ = nil;
  if ([self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VALID]]) {
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VALID] withBOOL:NO];
    if (_parent_ != nil) {
      [_parent_ invalidate];
    }
  }
}

- (ReactUnitSlot *)invalidateSlot {
  return [self invalidateSlotWithBOOL:NO];
}

- (ReactUnitSlot *)invalidateSlotWithBOOL:(BOOL)styles {
  return [[TripleplayUiElement_$4 alloc] initWithTripleplayUiElement:self withBOOL:styles];
}

- (void)validate {
  if (![self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VALID]]) {
    [self layout];
    [self setWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum VALID] withBOOL:YES];
  }
}

- (TripleplayUiRoot *)root {
  return (_parent_ == nil) ? nil : [((TripleplayUiElements *) NIL_CHK(_parent_)) root];
}

- (BOOL)isSetWithTripleplayUiElement_FlagEnum:(TripleplayUiElement_FlagEnum *)flag {
  return (((TripleplayUiElement_FlagEnum *) NIL_CHK(flag)).mask & _flags_) != 0;
}

- (void)setWithTripleplayUiElement_FlagEnum:(TripleplayUiElement_FlagEnum *)flag
                                   withBOOL:(BOOL)on {
  if (on) {
    _flags_ |= ((TripleplayUiElement_FlagEnum *) NIL_CHK(flag)).mask;
  }
  else {
    _flags_ &= ~((TripleplayUiElement_FlagEnum *) NIL_CHK(flag)).mask;
  }
}

- (id<PythagorasFIDimension>)preferredSizeWithFloat:(float)hintX
                                          withFloat:(float)hintY {
  if (_preferredSize_ == nil) {
    PythagorasFDimension *psize = [self computeSizeWithFloat:hintX withFloat:hintY];
    if (_constraint_ != nil) [_constraint_ adjustPreferredSizeWithPythagorasFDimension:psize withFloat:hintX withFloat:hintY];
    ((PythagorasFDimension *) NIL_CHK(psize)).width_ = [PythagorasFMathUtil iceilWithFloat:((PythagorasFDimension *) NIL_CHK(psize)).width_];
    ((PythagorasFDimension *) NIL_CHK(psize)).height_ = [PythagorasFMathUtil iceilWithFloat:((PythagorasFDimension *) NIL_CHK(psize)).height_];
    _preferredSize_ = psize;
  }
  return _preferredSize_;
}

- (void)setLocationWithFloat:(float)x
                   withFloat:(float)y {
  (void) [((id<PlaynCoreGroupLayer>) NIL_CHK(layer_)) setTranslationWithFloat:[PythagorasFMathUtil ifloorWithFloat:x] withFloat:[PythagorasFMathUtil ifloorWithFloat:y]];
}

- (id)setSizeWithFloat:(float)width
             withFloat:(float)height {
  BOOL changed = ((PythagorasFDimension *) NIL_CHK(_size_)).width_ != width || ((PythagorasFDimension *) NIL_CHK(_size_)).height_ != height;
  [((PythagorasFDimension *) NIL_CHK(_size_)) setSizeWithFloat:width withFloat:height];
  if (_preferredSize_ != nil && ![((PythagorasFDimension *) NIL_CHK(_size_)) isEqual:_preferredSize_]) [self clearLayoutData];
  if (changed) [self invalidate];
  return [self asT];
}

- (id)resolveStyleWithTripleplayUiStyle:(TripleplayUiStyle *)style {
  return [TripleplayUiStyles resolveStyleWithTripleplayUiElement:self withTripleplayUiStyle:style];
}

- (PythagorasFDimension *)computeSizeWithFloat:(float)hintX
                                     withFloat:(float)hintY {
  TripleplayUiElement_LayoutData *ldata = _ldata_ = [self createLayoutDataWithFloat:hintX withFloat:hintY];
  PythagorasFDimension *size = [((TripleplayUiElement_LayoutData *) NIL_CHK(ldata)) computeSizeWithFloat:hintX - [((TripleplayUiBackground *) NIL_CHK(ldata.bg)) width] withFloat:hintY - [((TripleplayUiBackground *) NIL_CHK(ldata.bg)) height]];
  return [((TripleplayUiBackground *) NIL_CHK(ldata.bg)) addInsetsWithPythagorasFDimension:size];
}

- (void)layout {
  if (![self isVisible]) return;
  float width = ((PythagorasFDimension *) NIL_CHK(_size_)).width_, height = ((PythagorasFDimension *) NIL_CHK(_size_)).height_;
  TripleplayUiElement_LayoutData *ldata = (_ldata_ != nil) ? _ldata_ : [self createLayoutDataWithFloat:width withFloat:height];
  TripleplayUiBackground_Instance *bginst = ((TripleplayUiBackground_Instance *) [((TripleplayUtilRef *) NIL_CHK(_bginst_)) get]);
  BOOL bgok = (bginst != nil && [((TripleplayUiBackground_Instance *) NIL_CHK(bginst)) owner] == ((TripleplayUiElement_LayoutData *) NIL_CHK(ldata)).bg && [((id<PythagorasFIDimension>) NIL_CHK(bginst.size)) isEqual:_size_]);
  if (!bgok) [((TripleplayUtilRef *) NIL_CHK(_bginst_)) clear];
  if (width > 0 && height > 0 && !bgok) {
    bginst = ((TripleplayUiBackground_Instance *) [((TripleplayUtilRef *) NIL_CHK(_bginst_)) setWithId:[((TripleplayUiBackground *) NIL_CHK(ldata.bg)) instantiateWithPythagorasFIDimension:_size_]]);
    [((TripleplayUiBackground_Instance *) NIL_CHK(bginst)) addToWithPlaynCoreGroupLayer:layer_ withFloat:0 withFloat:0 withFloat:0];
  }
  [((TripleplayUiElement_LayoutData *) NIL_CHK(ldata)) layoutWithFloat:((TripleplayUiBackground *) NIL_CHK(ldata.bg)).left withFloat:((TripleplayUiBackground *) NIL_CHK(ldata.bg)).top withFloat:width - [((TripleplayUiBackground *) NIL_CHK(ldata.bg)) width] withFloat:height - [((TripleplayUiBackground *) NIL_CHK(ldata.bg)) height]];
  [self clearLayoutData];
}

- (TripleplayUiElement_LayoutData *)createLayoutDataWithFloat:(float)hintX
                                                    withFloat:(float)hintY {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)clearLayoutData {
  _ldata_ = nil;
}

- (id<PlaynCoreGroupLayer>)createLayer {
  return [((id<PlaynCoreGraphics>) [PlaynCorePlayN graphics]) createGroupLayer];
}

- (BOOL)willDestroy {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum WILL_DESTROY]];
}

- (BOOL)willRemove {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_REMOVING]] || (_parent_ != nil && [((TripleplayUiElements *) NIL_CHK(_parent_)) willRemove]);
}

- (BOOL)willAdd {
  return [self isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum IS_ADDING]] || (_parent_ != nil && [((TripleplayUiElements *) NIL_CHK(_parent_)) willAdd]);
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement *typedCopy = (TripleplayUiElement *) copy;
  typedCopy.layer = layer_;
  typedCopy._flags = _flags_;
  typedCopy._parent = _parent_;
  typedCopy._preferredSize = _preferredSize_;
  typedCopy._size = _size_;
  typedCopy._styles = _styles_;
  typedCopy._constraint = _constraint_;
  typedCopy._hierarchyChanged = _hierarchyChanged_;
  typedCopy._ldata = _ldata_;
  typedCopy._bginst = _bginst_;
}

@end

static TripleplayUiElement_TakeEnum *TripleplayUiElement_TakeEnum_MAX;
static TripleplayUiElement_TakeEnum *TripleplayUiElement_TakeEnum_MIN;
static TripleplayUiElement_TakeEnum *TripleplayUiElement_TakeEnum_PREFERRED_IF_SET;
IOSObjectArray *TripleplayUiElement_TakeEnum_values;

@implementation TripleplayUiElement_TakeEnum

+ (TripleplayUiElement_TakeEnum *)MAX {
  return TripleplayUiElement_TakeEnum_MAX;
}
+ (TripleplayUiElement_TakeEnum *)MIN {
  return TripleplayUiElement_TakeEnum_MIN;
}
+ (TripleplayUiElement_TakeEnum *)PREFERRED_IF_SET {
  return TripleplayUiElement_TakeEnum_PREFERRED_IF_SET;
}

- (id)copyWithZone:(NSZone *)zone {
  return self;
}

- (float)applyWithFloat:(float)preferred
              withFloat:(float)original {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id)initWithNSString:(NSString *)name withInt:(int)ordinal {
  return [super initWithNSString:name withInt:ordinal];
}

+ (void)initialize {
  if (self == [TripleplayUiElement_TakeEnum class]) {
    TripleplayUiElement_TakeEnum_MAX = [[TripleplayUiElement_TakeEnum_$1 alloc] initWithNSString:@"TripleplayUiElement_Take_MAX" withInt:0];
    TripleplayUiElement_TakeEnum_MIN = [[TripleplayUiElement_TakeEnum_$2 alloc] initWithNSString:@"TripleplayUiElement_Take_MIN" withInt:1];
    TripleplayUiElement_TakeEnum_PREFERRED_IF_SET = [[TripleplayUiElement_TakeEnum_$3 alloc] initWithNSString:@"TripleplayUiElement_Take_PREFERRED_IF_SET" withInt:2];
    TripleplayUiElement_TakeEnum_values = [[IOSObjectArray alloc] initWithObjects:(id[]){ TripleplayUiElement_TakeEnum_MAX, TripleplayUiElement_TakeEnum_MIN, TripleplayUiElement_TakeEnum_PREFERRED_IF_SET, nil } count:3 type:[IOSClass classWithClass:[TripleplayUiElement_TakeEnum class]]];
  }
}

+ (IOSObjectArray *)values {
  return [IOSObjectArray arrayWithArray:TripleplayUiElement_TakeEnum_values];
}

+ (TripleplayUiElement_TakeEnum *)valueOfWithNSString:(NSString *)name {
  for (int i = 0; i < [TripleplayUiElement_TakeEnum_values count]; i++) {
    TripleplayUiElement_TakeEnum *e = [TripleplayUiElement_TakeEnum_values objectAtIndex:i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:name];
  return nil;
}

@end
@implementation TripleplayUiElement_TakeEnum_$1

- (float)applyWithFloat:(float)preferred
              withFloat:(float)original {
  return [JavaLangMath maxWithFloat:preferred withFloat:original];
}

- (id)initWithNSString:(NSString *)name withInt:(int)ordinal {
  return [super initWithNSString:name withInt:ordinal];
}

@end
@implementation TripleplayUiElement_TakeEnum_$2

- (float)applyWithFloat:(float)preferred
              withFloat:(float)original {
  return [JavaLangMath minWithFloat:preferred withFloat:original];
}

- (id)initWithNSString:(NSString *)name withInt:(int)ordinal {
  return [super initWithNSString:name withInt:ordinal];
}

@end
@implementation TripleplayUiElement_TakeEnum_$3

- (float)applyWithFloat:(float)preferred
              withFloat:(float)original {
  return preferred == 0 ? original : preferred;
}

- (id)initWithNSString:(NSString *)name withInt:(int)ordinal {
  return [super initWithNSString:name withInt:ordinal];
}

@end
@implementation TripleplayUiElement_BaseLayoutData

- (void)layoutWithFloat:(float)left
              withFloat:(float)top
              withFloat:(float)width
              withFloat:(float)height {
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$ {
  return [super init];
}

@end
@implementation TripleplayUiElement_LayoutData

@synthesize bg = bg_;

- (PythagorasFDimension *)computeSizeWithFloat:(float)hintX
                                     withFloat:(float)hintY {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$ {
  if ((self = [super initWithTripleplayUiElement:outer$])) {
    bg_ = ((TripleplayUiBackground *) [outer$ resolveStyleWithTripleplayUiStyle:[TripleplayUiStyle BACKGROUND]]);
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_LayoutData *typedCopy = (TripleplayUiElement_LayoutData *) copy;
  typedCopy.bg = bg_;
}

@end
@implementation TripleplayUiElement_SizableLayoutData

@synthesize layoutDelegate = layoutDelegate_;
@synthesize sizeDelegate = sizeDelegate_;
@synthesize prefWidth = prefWidth_;
@synthesize prefHeight = prefHeight_;
@synthesize widthFn = widthFn_;
@synthesize heightFn = heightFn_;

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$
withTripleplayUiElement_BaseLayoutData:(TripleplayUiElement_BaseLayoutData *)layoutDelegate
withTripleplayUiElement_LayoutData:(TripleplayUiElement_LayoutData *)sizeDelegate
        withPythagorasFIDimension:(id<PythagorasFIDimension>)prefSize {
  if ((self = [super initWithTripleplayUiElement:outer$])) {
    widthFn_ = [TripleplayUiElement_TakeEnum PREFERRED_IF_SET];
    heightFn_ = [TripleplayUiElement_TakeEnum PREFERRED_IF_SET];
    self.layoutDelegate = layoutDelegate;
    self.sizeDelegate = sizeDelegate;
    if (prefSize != nil) {
      prefWidth_ = [prefSize width];
      prefHeight_ = [prefSize height];
    }
    else {
      prefWidth_ = prefHeight_ = 0;
    }
  }
  return self;
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$
withTripleplayUiElement_LayoutData:(TripleplayUiElement_LayoutData *)delegate
        withPythagorasFIDimension:(id<PythagorasFIDimension>)prefSize {
  if ((self = [super initWithTripleplayUiElement:outer$])) {
    widthFn_ = [TripleplayUiElement_TakeEnum PREFERRED_IF_SET];
    heightFn_ = [TripleplayUiElement_TakeEnum PREFERRED_IF_SET];
    self.layoutDelegate = delegate;
    self.sizeDelegate = delegate;
    if (prefSize != nil) {
      prefWidth_ = [prefSize width];
      prefHeight_ = [prefSize height];
    }
    else {
      prefWidth_ = prefHeight_ = 0;
    }
  }
  return self;
}

- (TripleplayUiElement_SizableLayoutData *)forWidthWithTripleplayUiElement_TakeEnum:(TripleplayUiElement_TakeEnum *)fn {
  widthFn_ = fn;
  return self;
}

- (TripleplayUiElement_SizableLayoutData *)forWidthWithTripleplayUiElement_TakeEnum:(TripleplayUiElement_TakeEnum *)fn
                                                                          withFloat:(float)pref {
  widthFn_ = fn;
  prefWidth_ = pref;
  return self;
}

- (TripleplayUiElement_SizableLayoutData *)forHeightWithTripleplayUiElement_TakeEnum:(TripleplayUiElement_TakeEnum *)fn {
  heightFn_ = fn;
  return self;
}

- (TripleplayUiElement_SizableLayoutData *)forHeightWithTripleplayUiElement_TakeEnum:(TripleplayUiElement_TakeEnum *)fn
                                                                           withFloat:(float)pref {
  heightFn_ = fn;
  prefHeight_ = pref;
  return self;
}

- (PythagorasFDimension *)computeSizeWithFloat:(float)hintX
                                     withFloat:(float)hintY {
  hintX = [self selectWithFloat:prefWidth_ withFloat:hintX];
  hintY = [self selectWithFloat:prefHeight_ withFloat:hintY];
  PythagorasFDimension *dim = sizeDelegate_ == nil ? [[PythagorasFDimension alloc] initWithFloat:prefWidth_ withFloat:prefHeight_] : [((TripleplayUiElement_LayoutData *) NIL_CHK(sizeDelegate_)) computeSizeWithFloat:hintX withFloat:hintY];
  ((PythagorasFDimension *) NIL_CHK(dim)).width_ = [((TripleplayUiElement_TakeEnum *) NIL_CHK(widthFn_)) applyWithFloat:prefWidth_ withFloat:((PythagorasFDimension *) NIL_CHK(dim)).width_];
  ((PythagorasFDimension *) NIL_CHK(dim)).height_ = [((TripleplayUiElement_TakeEnum *) NIL_CHK(heightFn_)) applyWithFloat:prefHeight_ withFloat:((PythagorasFDimension *) NIL_CHK(dim)).height_];
  return dim;
}

- (void)layoutWithFloat:(float)left
              withFloat:(float)top
              withFloat:(float)width
              withFloat:(float)height {
  if (layoutDelegate_ != nil) [layoutDelegate_ layoutWithFloat:left withFloat:top withFloat:width withFloat:height];
}

- (float)selectWithFloat:(float)pref
               withFloat:(float)base {
  return pref == 0 ? base : pref;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_SizableLayoutData *typedCopy = (TripleplayUiElement_SizableLayoutData *) copy;
  typedCopy.layoutDelegate = layoutDelegate_;
  typedCopy.sizeDelegate = sizeDelegate_;
  typedCopy.prefWidth = prefWidth_;
  typedCopy.prefHeight = prefHeight_;
  typedCopy.widthFn = widthFn_;
  typedCopy.heightFn = heightFn_;
}

@end

static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_VALID;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_ENABLED;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_VISIBLE;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_SELECTED;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_WILL_DESTROY;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_HIT_DESCEND;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_HIT_ABSORB;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_IS_REMOVING;
static TripleplayUiElement_FlagEnum *TripleplayUiElement_FlagEnum_IS_ADDING;
IOSObjectArray *TripleplayUiElement_FlagEnum_values;

@implementation TripleplayUiElement_FlagEnum

+ (TripleplayUiElement_FlagEnum *)VALID {
  return TripleplayUiElement_FlagEnum_VALID;
}
+ (TripleplayUiElement_FlagEnum *)ENABLED {
  return TripleplayUiElement_FlagEnum_ENABLED;
}
+ (TripleplayUiElement_FlagEnum *)VISIBLE {
  return TripleplayUiElement_FlagEnum_VISIBLE;
}
+ (TripleplayUiElement_FlagEnum *)SELECTED {
  return TripleplayUiElement_FlagEnum_SELECTED;
}
+ (TripleplayUiElement_FlagEnum *)WILL_DESTROY {
  return TripleplayUiElement_FlagEnum_WILL_DESTROY;
}
+ (TripleplayUiElement_FlagEnum *)HIT_DESCEND {
  return TripleplayUiElement_FlagEnum_HIT_DESCEND;
}
+ (TripleplayUiElement_FlagEnum *)HIT_ABSORB {
  return TripleplayUiElement_FlagEnum_HIT_ABSORB;
}
+ (TripleplayUiElement_FlagEnum *)IS_REMOVING {
  return TripleplayUiElement_FlagEnum_IS_REMOVING;
}
+ (TripleplayUiElement_FlagEnum *)IS_ADDING {
  return TripleplayUiElement_FlagEnum_IS_ADDING;
}

- (id)copyWithZone:(NSZone *)zone {
  return self;
}

@synthesize mask = mask_;

- (id)initWithInt:(int)mask
     withNSString:(NSString *)name
          withInt:(int)ordinal {
  if ((self = [super initWithNSString:name withInt:ordinal])) {
    self.mask = mask;
  }
  return self;
}

+ (void)initialize {
  if (self == [TripleplayUiElement_FlagEnum class]) {
    TripleplayUiElement_FlagEnum_VALID = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 0 withNSString:@"TripleplayUiElement_Flag_VALID" withInt:0];
    TripleplayUiElement_FlagEnum_ENABLED = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 1 withNSString:@"TripleplayUiElement_Flag_ENABLED" withInt:1];
    TripleplayUiElement_FlagEnum_VISIBLE = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 2 withNSString:@"TripleplayUiElement_Flag_VISIBLE" withInt:2];
    TripleplayUiElement_FlagEnum_SELECTED = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 3 withNSString:@"TripleplayUiElement_Flag_SELECTED" withInt:3];
    TripleplayUiElement_FlagEnum_WILL_DESTROY = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 4 withNSString:@"TripleplayUiElement_Flag_WILL_DESTROY" withInt:4];
    TripleplayUiElement_FlagEnum_HIT_DESCEND = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 5 withNSString:@"TripleplayUiElement_Flag_HIT_DESCEND" withInt:5];
    TripleplayUiElement_FlagEnum_HIT_ABSORB = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 6 withNSString:@"TripleplayUiElement_Flag_HIT_ABSORB" withInt:6];
    TripleplayUiElement_FlagEnum_IS_REMOVING = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 7 withNSString:@"TripleplayUiElement_Flag_IS_REMOVING" withInt:7];
    TripleplayUiElement_FlagEnum_IS_ADDING = [[TripleplayUiElement_FlagEnum alloc] initWithInt:1 << 8 withNSString:@"TripleplayUiElement_Flag_IS_ADDING" withInt:8];
    TripleplayUiElement_FlagEnum_values = [[IOSObjectArray alloc] initWithObjects:(id[]){ TripleplayUiElement_FlagEnum_VALID, TripleplayUiElement_FlagEnum_ENABLED, TripleplayUiElement_FlagEnum_VISIBLE, TripleplayUiElement_FlagEnum_SELECTED, TripleplayUiElement_FlagEnum_WILL_DESTROY, TripleplayUiElement_FlagEnum_HIT_DESCEND, TripleplayUiElement_FlagEnum_HIT_ABSORB, TripleplayUiElement_FlagEnum_IS_REMOVING, TripleplayUiElement_FlagEnum_IS_ADDING, nil } count:9 type:[IOSClass classWithClass:[TripleplayUiElement_FlagEnum class]]];
  }
}

+ (IOSObjectArray *)values {
  return [IOSObjectArray arrayWithArray:TripleplayUiElement_FlagEnum_values];
}

+ (TripleplayUiElement_FlagEnum *)valueOfWithNSString:(NSString *)name {
  for (int i = 0; i < [TripleplayUiElement_FlagEnum_values count]; i++) {
    TripleplayUiElement_FlagEnum *e = [TripleplayUiElement_FlagEnum_values objectAtIndex:i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:name];
  return nil;
}

@end
@implementation TripleplayUiElement_$1

@synthesize this$0 = this$0_;

- (id<PlaynCoreLayer>)hitTestWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                           withPythagorasFPoint:(PythagorasFPoint *)p {
  id<PlaynCoreLayer> hit = nil;
  if ([this$0_ isVisible] && [this$0_ containsWithFloat:((PythagorasFPoint *) NIL_CHK(p)).x_ withFloat:((PythagorasFPoint *) NIL_CHK(p)).y_]) {
    if ([this$0_ isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum HIT_DESCEND]]) hit = [((id<PlaynCoreLayer>) NIL_CHK(layer)) hitTestDefaultWithPythagorasFPoint:p];
    if (hit == nil && [this$0_ isSetWithTripleplayUiElement_FlagEnum:[TripleplayUiElement_FlagEnum HIT_ABSORB]]) hit = layer;
  }
  return hit;
}

- (NSString *)description {
  return [NSString stringWithFormat:@"HitTester for %@", this$0_];
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_$1 *typedCopy = (TripleplayUiElement_$1 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiElement_$2

@synthesize this$0 = this$0_;

- (void)onEmitWithId:(JavaLangBoolean *)value {
  (void) [this$0_ setEnabledWithBOOL:[((JavaLangBoolean *) NIL_CHK(value)) booleanValue]];
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_$2 *typedCopy = (TripleplayUiElement_$2 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiElement_$3

@synthesize this$0 = this$0_;

- (void)onEmitWithId:(JavaLangBoolean *)value {
  (void) [this$0_ setVisibleWithBOOL:[((JavaLangBoolean *) NIL_CHK(value)) booleanValue]];
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_$3 *typedCopy = (TripleplayUiElement_$3 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation TripleplayUiElement_$4

@synthesize this$0 = this$0_;
@synthesize val$styles = val$styles_;

- (void)onEmit {
  [this$0_ invalidate];
  if (val$styles_) [this$0_ clearLayoutData];
}

- (id)initWithTripleplayUiElement:(TripleplayUiElement *)outer$
                         withBOOL:(BOOL)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$styles_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUiElement_$4 *typedCopy = (TripleplayUiElement_$4 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$styles = val$styles_;
}

@end
