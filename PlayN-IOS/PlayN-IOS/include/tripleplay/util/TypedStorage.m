//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: tripleplay/util/TypedStorage.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "java/lang/Boolean.h"
#include "java/lang/Double.h"
#include "java/lang/Enum.h"
#include "java/lang/Exception.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/StringBuilder.h"
#include "java/util/Iterator.h"
#include "playn/core/Log.h"
#include "playn/core/PlayN.h"
#include "playn/core/Storage.h"
#include "react/Connection.h"
#include "react/Function.h"
#include "react/RSet.h"
#include "react/Value.h"
#include "tripleplay/util/TypedStorage.h"

@implementation TripleplayUtilTypedStorage

@synthesize _storage = _storage_;

- (id)initWithPlaynCoreStorage:(id<PlaynCoreStorage>)storage {
  if ((self = [super init])) {
    _storage_ = storage;
  }
  return self;
}

- (BOOL)containsWithNSString:(NSString *)key {
  return [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key] != nil;
}

- (NSString *)getWithNSString:(NSString *)key {
  return [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
}

- (NSString *)getWithNSString:(NSString *)key
                 withNSString:(NSString *)defval {
  NSString *value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
  return (value == nil) ? defval : value;
}

- (void)setWithNSString:(NSString *)key
           withNSString:(NSString *)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:value];
}

- (int)getWithNSString:(NSString *)key
               withInt:(int)defval {
  NSString *value = nil;
  @try {
    value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
    return (value == nil) ? defval : [JavaLangInteger parseIntWithNSString:value];
  }
  @catch (JavaLangException *e) {
    [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) warnWithNSString:[NSString stringWithFormat:@"Failed to parse int prop [key=%@, value=%@]", key, value] withJavaLangThrowable:e];
    return defval;
  }
}

- (void)setWithNSString:(NSString *)key
                withInt:(int)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:[NSString valueOfInt:value]];
}

- (long long int)getWithNSString:(NSString *)key
                     withLongInt:(long long int)defval {
  NSString *value = nil;
  @try {
    value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
    return (value == nil) ? defval : [JavaLangLong parseLongWithNSString:value];
  }
  @catch (JavaLangException *e) {
    [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) warnWithNSString:[NSString stringWithFormat:@"Failed to parse long prop [key=%@, value=%@]", key, value] withJavaLangThrowable:e];
    return defval;
  }
}

- (void)setWithNSString:(NSString *)key
            withLongInt:(long long int)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:[NSString valueOfLong:value]];
}

- (double)getWithNSString:(NSString *)key
               withDouble:(double)defval {
  NSString *value = nil;
  @try {
    value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
    return (value == nil) ? defval : [JavaLangDouble parseDoubleWithNSString:value];
  }
  @catch (JavaLangException *e) {
    [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) warnWithNSString:[NSString stringWithFormat:@"Failed to parse double prop [key=%@, value=%@]", key, value] withJavaLangThrowable:e];
    return defval;
  }
}

- (void)setWithNSString:(NSString *)key
             withDouble:(double)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:[NSString valueOfDouble:value]];
}

- (BOOL)getWithNSString:(NSString *)key
               withBOOL:(BOOL)defval {
  NSString *value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
  return (value == nil) ? defval : [((NSString *) nil_chk(value)) equalsIgnoreCase:@"t"];
}

- (void)setWithNSString:(NSString *)key
               withBOOL:(BOOL)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:value ? @"t" : @"f"];
}

- (id)getWithNSString:(NSString *)key
               withId:(JavaLangEnum *)defval {
  IOSClass *eclass = (IOSClass *) [((JavaLangEnum *) nil_chk(defval)) getClass];
  NSString *value = nil;
  @try {
    value = [((id<PlaynCoreStorage>) nil_chk(_storage_)) getItemWithNSString:key];
    return (value == nil) ? defval : [JavaLangEnum valueOfWithIOSClass:eclass withNSString:value];
  }
  @catch (JavaLangException *e) {
    [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) warnWithNSString:[NSString stringWithFormat:@"Failed to parse enum prop [key=%@, value=%@]", key, value] withJavaLangThrowable:e];
    return defval;
  }
}

- (void)setWithNSString:(NSString *)key
       withJavaLangEnum:(JavaLangEnum *)value {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) setItemWithNSString:key withNSString:[((JavaLangEnum *) nil_chk(value)) name]];
}

- (void)removeWithNSString:(NSString *)key {
  [((id<PlaynCoreStorage>) nil_chk(_storage_)) removeItemWithNSString:key];
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                        withNSString:(NSString *)defval {
  ReactValue *value = [ReactValue createWithId:[self getWithNSString:key withNSString:defval]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$1 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                             withInt:(int)defval {
  ReactValue *value = [ReactValue createWithId:[JavaLangInteger valueOfWithInt:[self getWithNSString:key withInt:defval]]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$2 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                         withLongInt:(long long int)defval {
  ReactValue *value = [ReactValue createWithId:[JavaLangLong valueOfWithLongInt:[self getWithNSString:key withLongInt:defval]]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$3 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                          withDouble:(double)defval {
  ReactValue *value = [ReactValue createWithId:[JavaLangDouble valueOfWithDouble:[self getWithNSString:key withDouble:defval]]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$4 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                            withBOOL:(BOOL)defval {
  ReactValue *value = [ReactValue createWithId:[JavaLangBoolean valueOfWithBOOL:[self getWithNSString:key withBOOL:defval]]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$5 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactValue *)valueForWithNSString:(NSString *)key
                              withId:(JavaLangEnum *)defval {
  ReactValue *value = [ReactValue createWithId:[self getWithNSString:key withId:defval]];
  (void) [((ReactValue *) nil_chk(value)) connectWithReactValueView_Listener:[[TripleplayUtilTypedStorage_$6 alloc] initWithTripleplayUtilTypedStorage:self withNSString:key]];
  return value;
}

- (ReactRSet *)setForWithNSString:(NSString *)key
                withReactFunction:(id<ReactFunction>)toFunc
                withReactFunction:(id<ReactFunction>)fromFunc {
  ReactRSet *rset = [ReactRSet create];
  NSString *data = [self getWithNSString:key withNSString:(NSString *) nil];
  if (data != nil) {
    {
      IOSObjectArray *a__ = [data split:@","];
      int n__ = (int) [((IOSObjectArray *) nil_chk(a__)) count];
      for (int i__ = 0; i__ < n__; i__++) {
        NSString *value = [((IOSObjectArray *) nil_chk(a__)) objectAtIndex:i__];
        @try {
          [((ReactRSet *) nil_chk(rset)) addWithId:[((id<ReactFunction>) nil_chk(toFunc)) applyWithId:value]];
        }
        @catch (JavaLangException *e) {
          [((id<PlaynCoreLog>) nil_chk([PlaynCorePlayN log])) warnWithNSString:[NSString stringWithFormat:@"Invalid value (key=%@): %@", key, value] withJavaLangThrowable:e];
        }
      }
    }
  }
  (void) [((ReactRSet *) nil_chk(rset)) connectWithReactRSet_Listener:[[TripleplayUtilTypedStorage_$7 alloc] initWithTripleplayUtilTypedStorage:self withReactRSet:rset withReactFunction:fromFunc withNSString:key]];
  return rset;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage *typedCopy = (TripleplayUtilTypedStorage *) copy;
  typedCopy._storage = _storage_;
}

@end
@implementation TripleplayUtilTypedStorage_$1

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(NSString *)value {
  [this$0_ setWithNSString:val$key_ withNSString:value];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$1 *typedCopy = (TripleplayUtilTypedStorage_$1 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$2

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(JavaLangInteger *)value {
  [this$0_ setWithNSString:val$key_ withInt:[((JavaLangInteger *) nil_chk(value)) intValue]];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$2 *typedCopy = (TripleplayUtilTypedStorage_$2 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$3

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(JavaLangLong *)value {
  [this$0_ setWithNSString:val$key_ withLongInt:[((JavaLangLong *) nil_chk(value)) longLongValue]];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$3 *typedCopy = (TripleplayUtilTypedStorage_$3 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$4

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(JavaLangDouble *)value {
  [this$0_ setWithNSString:val$key_ withDouble:[((JavaLangDouble *) nil_chk(value)) doubleValue]];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$4 *typedCopy = (TripleplayUtilTypedStorage_$4 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$5

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(JavaLangBoolean *)value {
  [this$0_ setWithNSString:val$key_ withBOOL:[((JavaLangBoolean *) nil_chk(value)) booleanValue]];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$5 *typedCopy = (TripleplayUtilTypedStorage_$5 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$6

@synthesize this$0 = this$0_;
@synthesize val$key = val$key_;

- (void)onEmitWithId:(JavaLangEnum *)value {
  [this$0_ setWithNSString:val$key_ withJavaLangEnum:value];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                            withNSString:(NSString *)capture$0 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$key_ = capture$0;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$6 *typedCopy = (TripleplayUtilTypedStorage_$6 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$key = val$key_;
}

@end
@implementation TripleplayUtilTypedStorage_$7

@synthesize this$0 = this$0_;
@synthesize val$rset = val$rset_;
@synthesize val$fromFunc = val$fromFunc_;
@synthesize val$key = val$key_;

- (void)onAddWithId:(id)unused {
  JavaLangStringBuilder *buf = [[JavaLangStringBuilder alloc] init];
  {
    id<JavaUtilIterator> iter__ = [((ReactRSet *) nil_chk(val$rset_)) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(iter__)) hasNext]) {
      id value = [((id<JavaUtilIterator>) nil_chk(iter__)) next];
      if ([((JavaLangStringBuilder *) nil_chk(buf)) sequenceLength] > 0) (void) [((JavaLangStringBuilder *) nil_chk(buf)) appendWithNSString:@","];
      (void) [((JavaLangStringBuilder *) nil_chk(buf)) appendWithNSString:[((id<ReactFunction>) nil_chk(val$fromFunc_)) applyWithId:value]];
    }
  }
  [this$0_ setWithNSString:val$key_ withNSString:[((JavaLangStringBuilder *) nil_chk(buf)) description]];
}

- (id)initWithTripleplayUtilTypedStorage:(TripleplayUtilTypedStorage *)outer$
                           withReactRSet:(ReactRSet *)capture$0
                       withReactFunction:(id<ReactFunction>)capture$1
                            withNSString:(NSString *)capture$2 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$rset_ = capture$0;
    val$fromFunc_ = capture$1;
    val$key_ = capture$2;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TripleplayUtilTypedStorage_$7 *typedCopy = (TripleplayUtilTypedStorage_$7 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$rset = val$rset_;
  typedCopy.val$fromFunc = val$fromFunc_;
  typedCopy.val$key = val$key_;
}

@end
