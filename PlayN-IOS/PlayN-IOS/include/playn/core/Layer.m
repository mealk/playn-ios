//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: playn/core/Layer.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSClass.h"
#include "java/lang/IllegalArgumentException.h"
#include "playn/core/Connection.h"
#include "playn/core/Events.h"
#include "playn/core/GroupLayer.h"
#include "playn/core/Layer.h"
#include "playn/core/Mouse.h"
#include "playn/core/Pointer.h"
#include "playn/core/Touch.h"
#include "playn/core/gl/GLShader.h"
#include "pythagoras/f/IPoint.h"
#include "pythagoras/f/Point.h"
#include "pythagoras/f/Transform.h"

@implementation PlaynCoreLayer_Util

+ (PythagorasFPoint *)layerToScreenWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                withPythagorasFIPoint:(id<PythagorasFIPoint>)point
                                 withPythagorasFPoint:(PythagorasFPoint *)into {
  return [PlaynCoreLayer_Util layerToParentWithPlaynCoreLayer:layer withPlaynCoreLayer:nil withPythagorasFIPoint:point withPythagorasFPoint:into];
}

+ (PythagorasFPoint *)layerToScreenWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                            withFloat:(float)x
                                            withFloat:(float)y {
  PythagorasFPoint *into = [[PythagorasFPoint alloc] initWithFloat:x withFloat:y];
  return [PlaynCoreLayer_Util layerToScreenWithPlaynCoreLayer:layer withPythagorasFIPoint:into withPythagorasFPoint:into];
}

+ (PythagorasFPoint *)layerToParentWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                   withPlaynCoreLayer:(id<PlaynCoreLayer>)parent
                                withPythagorasFIPoint:(id<PythagorasFIPoint>)point
                                 withPythagorasFPoint:(PythagorasFPoint *)into {
  (void) [((PythagorasFPoint *) nil_chk(into)) setWithPythagorasFIPoint:point];
  while (layer != parent) {
    if (layer == nil) {
      @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:@"Failed to find parent, perhaps you passed parent, layer instead of layer, parent?"];
    }
    ((PythagorasFPoint *) nil_chk(into)).x_ -= [((id<PlaynCoreLayer>) nil_chk(layer)) originX];
    ((PythagorasFPoint *) nil_chk(into)).y_ -= [((id<PlaynCoreLayer>) nil_chk(layer)) originY];
    (void) [((id<PythagorasFTransform>) nil_chk([((id<PlaynCoreLayer>) nil_chk(layer)) transform])) transformWithPythagorasFIPoint:into withPythagorasFPoint:into];
    layer = [((id<PlaynCoreLayer>) nil_chk(layer)) parent];
  }
  return into;
}

+ (PythagorasFPoint *)layerToParentWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                   withPlaynCoreLayer:(id<PlaynCoreLayer>)parent
                                            withFloat:(float)x
                                            withFloat:(float)y {
  PythagorasFPoint *into = [[PythagorasFPoint alloc] initWithFloat:x withFloat:y];
  return [PlaynCoreLayer_Util layerToParentWithPlaynCoreLayer:layer withPlaynCoreLayer:parent withPythagorasFIPoint:into withPythagorasFPoint:into];
}

+ (PythagorasFPoint *)screenToLayerWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                withPythagorasFIPoint:(id<PythagorasFIPoint>)point
                                 withPythagorasFPoint:(PythagorasFPoint *)into {
  id<PlaynCoreLayer> parent = [((id<PlaynCoreLayer>) nil_chk(layer)) parent];
  id<PythagorasFIPoint> cur = (parent == nil) ? ((id) point) : [PlaynCoreLayer_Util screenToLayerWithPlaynCoreLayer:parent withPythagorasFIPoint:point withPythagorasFPoint:into];
  return [PlaynCoreLayer_Util parentToLayerWithPlaynCoreLayer:layer withPythagorasFIPoint:cur withPythagorasFPoint:into];
}

+ (PythagorasFPoint *)screenToLayerWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                            withFloat:(float)x
                                            withFloat:(float)y {
  PythagorasFPoint *into = [[PythagorasFPoint alloc] initWithFloat:x withFloat:y];
  return [PlaynCoreLayer_Util screenToLayerWithPlaynCoreLayer:layer withPythagorasFIPoint:into withPythagorasFPoint:into];
}

+ (PythagorasFPoint *)parentToLayerWithPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                withPythagorasFIPoint:(id<PythagorasFIPoint>)point
                                 withPythagorasFPoint:(PythagorasFPoint *)into {
  (void) [((id<PythagorasFTransform>) nil_chk([((id<PlaynCoreLayer>) nil_chk(layer)) transform])) inverseTransformWithPythagorasFIPoint:point withPythagorasFPoint:into];
  ((PythagorasFPoint *) nil_chk(into)).x_ += [((id<PlaynCoreLayer>) nil_chk(layer)) originX];
  ((PythagorasFPoint *) nil_chk(into)).y_ += [((id<PlaynCoreLayer>) nil_chk(layer)) originY];
  return into;
}

+ (PythagorasFPoint *)parentToLayerWithPlaynCoreLayer:(id<PlaynCoreLayer>)parent
                                   withPlaynCoreLayer:(id<PlaynCoreLayer>)layer
                                withPythagorasFIPoint:(id<PythagorasFIPoint>)point
                                 withPythagorasFPoint:(PythagorasFPoint *)into {
  id<PlaynCoreLayer> immediateParent = [((id<PlaynCoreLayer>) nil_chk(layer)) parent];
  if (immediateParent != parent) point = [PlaynCoreLayer_Util parentToLayerWithPlaynCoreLayer:parent withPlaynCoreLayer:immediateParent withPythagorasFIPoint:point withPythagorasFPoint:into];
  (void) [PlaynCoreLayer_Util parentToLayerWithPlaynCoreLayer:layer withPythagorasFIPoint:point withPythagorasFPoint:into];
  return into;
}

+ (BOOL)hitTestWithPlaynCoreLayer_HasSize:(id<PlaynCoreLayer_HasSize>)layer
                    withPythagorasFIPoint:(id<PythagorasFIPoint>)point {
  return [PlaynCoreLayer_Util hitTestWithPlaynCoreLayer_HasSize:layer withFloat:[((id<PythagorasFIPoint>) nil_chk(point)) x] withFloat:[((id<PythagorasFIPoint>) nil_chk(point)) y]];
}

+ (BOOL)hitTestWithPlaynCoreLayer_HasSize:(id<PlaynCoreLayer_HasSize>)layer
             withPlaynCoreEvents_Position:(id<PlaynCoreEvents_Position>)position {
  return [PlaynCoreLayer_Util hitTestWithPlaynCoreLayer_HasSize:layer withFloat:[((id<PlaynCoreEvents_Position>) nil_chk(position)) x] withFloat:[((id<PlaynCoreEvents_Position>) nil_chk(position)) y]];
}

+ (BOOL)hitTestWithPlaynCoreLayer_HasSize:(id<PlaynCoreLayer_HasSize>)layer
                                withFloat:(float)x
                                withFloat:(float)y {
  PythagorasFPoint *point = [PlaynCoreLayer_Util screenToLayerWithPlaynCoreLayer:layer withFloat:x withFloat:y];
  return ([((PythagorasFPoint *) nil_chk(point)) x] >= 0 && [((PythagorasFPoint *) nil_chk(point)) y] >= 0 && [((PythagorasFPoint *) nil_chk(point)) x] <= [((id<PlaynCoreLayer_HasSize>) nil_chk(layer)) width] && [((PythagorasFPoint *) nil_chk(point)) y] <= [((id<PlaynCoreLayer_HasSize>) nil_chk(layer)) height]);
}

- (id)init {
  return [super init];
}

@end
