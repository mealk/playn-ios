//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: playn/core/canvas/ImmediateLayerCanvas.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSClass.h"
#include "playn/core/AbstractLayer.h"
#include "playn/core/Canvas.h"
#include "playn/core/ImmediateLayer.h"
#include "playn/core/InternalTransform.h"
#include "playn/core/canvas/CanvasSurface.h"
#include "playn/core/canvas/ImmediateLayerCanvas.h"
#include "playn/core/canvas/LayerCanvas.h"

@implementation PlaynCoreCanvasImmediateLayerCanvas

@synthesize surf = surf_;
@synthesize renderer_ = renderer__;

- (id)initWithPlaynCoreInternalTransform:(id<PlaynCoreInternalTransform>)xform
    withPlaynCoreImmediateLayer_Renderer:(id<PlaynCoreImmediateLayer_Renderer>)renderer {
  if ((self = [super initWithPlaynCoreInternalTransform:xform])) {
    surf_ = [[PlaynCoreCanvasCanvasSurface alloc] initWithPlaynCoreCanvas:nil];
    self.renderer_ = renderer;
  }
  return self;
}

- (id<PlaynCoreImmediateLayer_Renderer>)renderer {
  return renderer__;
}

- (void)paintWithPlaynCoreCanvas:(id<PlaynCoreCanvas>)canvas
                       withFloat:(float)parentAlpha {
  if (![self visible]) return;
  (void) [((id<PlaynCoreCanvas>) nil_chk(canvas)) save];
  [self transformWithPlaynCoreCanvas:canvas];
  (void) [((id<PlaynCoreCanvas>) nil_chk(canvas)) setAlphaWithFloat:parentAlpha * [self alpha]];
  [self renderWithPlaynCoreCanvas:canvas];
  (void) [((id<PlaynCoreCanvas>) nil_chk(canvas)) restore];
}

- (void)renderWithPlaynCoreCanvas:(id<PlaynCoreCanvas>)canvas {
  ((PlaynCoreCanvasCanvasSurface *) nil_chk(surf_)).canvas = canvas;
  [((id<PlaynCoreImmediateLayer_Renderer>) nil_chk(renderer__)) renderWithPlaynCoreSurface:surf_];
  ((PlaynCoreCanvasCanvasSurface *) nil_chk(surf_)).canvas = nil;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreCanvasImmediateLayerCanvas *typedCopy = (PlaynCoreCanvasImmediateLayerCanvas *) copy;
  typedCopy.surf = surf_;
  typedCopy.renderer_ = renderer__;
}

@end
@implementation PlaynCoreCanvasImmediateLayerCanvas_Clipped

@synthesize width_ = width__;
@synthesize height_ = height__;

- (id)initWithPlaynCoreInternalTransform:(id<PlaynCoreInternalTransform>)xform
                                 withInt:(int)width
                                 withInt:(int)height
    withPlaynCoreImmediateLayer_Renderer:(id<PlaynCoreImmediateLayer_Renderer>)renderer {
  if ((self = [super initWithPlaynCoreInternalTransform:xform withPlaynCoreImmediateLayer_Renderer:renderer])) {
    self.width_ = width;
    self.height_ = height;
  }
  return self;
}

- (float)width {
  return width__;
}

- (float)height {
  return height__;
}

- (float)scaledWidth {
  return [self scaleX] * [self width];
}

- (float)scaledHeight {
  return [self scaleY] * [self height];
}

- (void)renderWithPlaynCoreCanvas:(id<PlaynCoreCanvas>)canvas {
  (void) [((id<PlaynCoreCanvas>) nil_chk(canvas)) clipRectWithFloat:0 withFloat:0 withFloat:width__ withFloat:height__];
  [super renderWithPlaynCoreCanvas:canvas];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreCanvasImmediateLayerCanvas_Clipped *typedCopy = (PlaynCoreCanvasImmediateLayerCanvas_Clipped *) copy;
  typedCopy.width_ = width__;
  typedCopy.height_ = height__;
}

@end
