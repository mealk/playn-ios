//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: playn/core/Dispatcher.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSClass.h"
#import "java/lang/Throwable.h"
#import "playn/core/AbstractLayer.h"
#import "playn/core/Dispatcher.h"
#import "playn/core/Events.h"
#import "playn/core/GroupLayer.h"
#import "playn/core/Log.h"
#import "playn/core/PlayN.h"

@implementation PlaynCoreDispatcher_Util

+ (id<PlaynCoreDispatcher>)selectWithBOOL:(BOOL)propagating {
  return propagating ? [PlaynCoreDispatcher PROPAGATING] : [PlaynCoreDispatcher SINGLE];
}

- (id)init {
  return [super init];
}

@end

@implementation PlaynCoreDispatcher

static id<PlaynCoreDispatcher> PlaynCoreDispatcher_SINGLE_;
static id<PlaynCoreDispatcher> PlaynCoreDispatcher_PROPAGATING_;

+ (id<PlaynCoreDispatcher>)SINGLE {
  return PlaynCoreDispatcher_SINGLE_;
}

+ (id<PlaynCoreDispatcher>)PROPAGATING {
  return PlaynCoreDispatcher_PROPAGATING_;
}

+ (void)initialize OBJC_METHOD_FAMILY_NONE {
  PlaynCoreDispatcher_SINGLE_ = [[PlaynCoreDispatcher_$1 alloc] init];
  PlaynCoreDispatcher_PROPAGATING_ = [[PlaynCoreDispatcher_$2 alloc] init];
}

@end
@implementation PlaynCoreDispatcher_$1

- (void)dispatchWithPlaynCoreAbstractLayer:(PlaynCoreAbstractLayer *)layer
                              withIOSClass:(IOSClass *)listenerType
                                    withId:(PlaynCoreEvents_Input_Impl *)event
    withPlaynCoreAbstractLayer_Interaction:(id<PlaynCoreAbstractLayer_Interaction>)interaction {
  PlaynCoreEvents_Input_Impl *localized = (PlaynCoreEvents_Input_Impl *) [((PlaynCoreEvents_Input_Impl *) NIL_CHK(event)) localizeWithPlaynCoreLayer:layer];
  @try {
    [((PlaynCoreAbstractLayer *) NIL_CHK(layer)) interactWithIOSClass:listenerType withPlaynCoreAbstractLayer_Interaction:interaction withId:localized];
  }
  @catch (JavaLangThrowable *t) {
    [((id<PlaynCoreLog>) [PlaynCorePlayN log]) warnWithNSString:[NSString stringWithFormat:@"Interaction failure [layer=%@, iact=%@, event=%@]", layer, interaction, localized] withJavaLangThrowable:t];
  }
}

- (id)init {
  return [super init];
}

@end
@implementation PlaynCoreDispatcher_$2

- (void)dispatchWithPlaynCoreAbstractLayer:(PlaynCoreAbstractLayer *)layer
                              withIOSClass:(IOSClass *)listenerType
                                    withId:(PlaynCoreEvents_Input_Impl *)event
    withPlaynCoreAbstractLayer_Interaction:(id<PlaynCoreAbstractLayer_Interaction>)interaction {
  PlaynCoreEvents_Input_Impl *localized = (PlaynCoreEvents_Input_Impl *) [((PlaynCoreEvents_Input_Impl *) NIL_CHK(event)) localizeWithPlaynCoreLayer:layer];
  @try {
    [((PlaynCoreAbstractLayer *) NIL_CHK(layer)) interactWithIOSClass:listenerType withPlaynCoreAbstractLayer_Interaction:interaction withId:localized];
    while ([((PlaynCoreAbstractLayer *) NIL_CHK(layer)) parent] != nil && ![((id<PlaynCoreEvents_Flags>) [((PlaynCoreEvents_Input_Impl *) NIL_CHK(localized)) flags]) getPropagationStopped]) {
      layer = (PlaynCoreAbstractLayer *) [((PlaynCoreAbstractLayer *) NIL_CHK(layer)) parent];
      [((PlaynCoreAbstractLayer *) NIL_CHK(layer)) interactWithIOSClass:listenerType withPlaynCoreAbstractLayer_Interaction:interaction withId:localized];
    }
  }
  @catch (JavaLangThrowable *t) {
    [((id<PlaynCoreLog>) [PlaynCorePlayN log]) warnWithNSString:[NSString stringWithFormat:@"Interaction failure [layer=%@, iact=%@, event=%@]", layer, interaction, localized] withJavaLangThrowable:t];
  }
}

- (id)init {
  return [super init];
}

@end
