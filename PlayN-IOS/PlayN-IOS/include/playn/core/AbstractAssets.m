//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: playn/core/AbstractAssets.java
//
//  Created by Thomas on 7/25/13.
//

#include "java/lang/Exception.h"
#include "java/lang/Throwable.h"
#include "playn/core/AbstractAssets.h"
#include "playn/core/AbstractPlatform.h"
#include "playn/core/Assets.h"
#include "playn/core/AsyncImage.h"
#include "playn/core/Image.h"
#include "playn/core/Sound.h"
#include "playn/core/gl/Scale.h"
#include "playn/core/util/Callback.h"

@implementation PlaynCoreAbstractAssets

@synthesize platform = platform_;

- (id<PlaynCoreImage>)getImageSyncWithNSString:(NSString *)path {
  return [self loadImageWithNSString:path withPlaynCoreAbstractAssets_ImageReceiver:[[PlaynCoreAbstractAssets_$1 alloc] initWithPlaynCoreAbstractAssets:self]];
}

- (id<PlaynCoreImage>)getImageWithNSString:(NSString *)path {
  id<PlaynCoreAsyncImage> image = [self createAsyncImageWithFloat:0 withFloat:0];
  [((PlaynCoreAbstractPlatform *) nil_chk(platform_)) invokeAsyncWithJavaLangRunnable:[[PlaynCoreAbstractAssets_$2 alloc] initWithPlaynCoreAbstractAssets:self withNSString:path withPlaynCoreAsyncImage:image]];
  return image;
}

- (id<PlaynCoreImage>)getRemoteImageWithNSString:(NSString *)url {
  return [self getRemoteImageWithNSString:url withFloat:0 withFloat:0];
}

- (id<PlaynCoreImage>)getRemoteImageWithNSString:(NSString *)url
                                       withFloat:(float)width
                                       withFloat:(float)height {
  JavaLangException *error = [[JavaLangException alloc] initWithNSString:[NSString stringWithFormat:@"Remote image loading not yet supported: %@@%fx%f", url, width, height]];
  return [self createRemoteErrorImageWithJavaLangThrowable:error withFloat:width withFloat:height];
}

- (id<PlaynCoreSound>)getMusicWithNSString:(NSString *)path {
  return [self getSoundWithNSString:path];
}

- (void)getTextWithNSString:(NSString *)path
  withPlaynCoreUtilCallback:(id<PlaynCoreUtilCallback>)callback {
  [((PlaynCoreAbstractPlatform *) nil_chk(platform_)) invokeAsyncWithJavaLangRunnable:[[PlaynCoreAbstractAssets_$3 alloc] initWithPlaynCoreAbstractAssets:self withPlaynCoreUtilCallback:callback withNSString:path]];
}

- (id)initWithPlaynCoreAbstractPlatform:(PlaynCoreAbstractPlatform *)platform {
  if ((self = [super init])) {
    self.platform = platform;
  }
  return self;
}

- (id<PlaynCoreImage>)createStaticImageWithId:(id)iimpl
                         withPlaynCoreGlScale:(PlaynCoreGlScale *)scale_ {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<PlaynCoreAsyncImage>)createAsyncImageWithFloat:(float)width
                                           withFloat:(float)height {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<PlaynCoreImage>)loadImageWithNSString:(NSString *)path
  withPlaynCoreAbstractAssets_ImageReceiver:(id<PlaynCoreAbstractAssets_ImageReceiver>)recv {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<PlaynCoreImage>)createRemoteErrorImageWithJavaLangThrowable:(JavaLangThrowable *)cause
                                                        withFloat:(float)width
                                                        withFloat:(float)height {
  return (width <= 0 || height <= 0) ? [self createErrorImageWithJavaLangThrowable:cause] : [self createErrorImageWithJavaLangThrowable:cause withFloat:width withFloat:height];
}

- (id<PlaynCoreImage>)createErrorImageWithJavaLangThrowable:(JavaLangThrowable *)cause {
  return [self createErrorImageWithJavaLangThrowable:cause withFloat:50 withFloat:50];
}

- (id<PlaynCoreImage>)createErrorImageWithJavaLangThrowable:(JavaLangThrowable *)cause
                                                  withFloat:(float)width
                                                  withFloat:(float)height {
  id<PlaynCoreAsyncImage> image = [self createAsyncImageWithFloat:width withFloat:height];
  [((id<PlaynCoreAsyncImage>) nil_chk(image)) setErrorWithJavaLangThrowable:cause];
  return image;
}

- (void)setImageLaterWithPlaynCoreAsyncImage:(id<PlaynCoreAsyncImage>)image
                                      withId:(id)impl
                        withPlaynCoreGlScale:(PlaynCoreGlScale *)scale_ {
  [((PlaynCoreAbstractPlatform *) nil_chk(platform_)) invokeLaterWithJavaLangRunnable:[[PlaynCoreAbstractAssets_$4 alloc] initWithPlaynCoreAsyncImage:image withId:impl withPlaynCoreGlScale:scale_]];
}

- (void)setErrorLaterWithPlaynCoreAsyncImage:(id<PlaynCoreAsyncImage>)image
                       withJavaLangThrowable:(JavaLangThrowable *)error {
  [((PlaynCoreAbstractPlatform *) nil_chk(platform_)) invokeLaterWithJavaLangRunnable:[[PlaynCoreAbstractAssets_$5 alloc] initWithPlaynCoreAsyncImage:image withJavaLangThrowable:error]];
}

+ (NSString *)normalizePathWithNSString:(NSString *)path {
  int pathLen;
  do {
    pathLen = [((NSString *) nil_chk(path)) length];
    path = [((NSString *) nil_chk(path)) replaceAll:@"[^/]+/\\.\\./" withReplacement:@""];
  }
  while ([((NSString *) nil_chk(path)) length] != pathLen);
  return path;
}

- (id<PlaynCoreSound>)getSoundWithNSString:(NSString *)param0 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (NSString *)getTextSyncWithNSString:(NSString *)param0 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets *typedCopy = (PlaynCoreAbstractAssets *) copy;
  typedCopy.platform = platform_;
}

@end
@implementation PlaynCoreAbstractAssets_$1

@synthesize this$0 = this$0_;

- (id<PlaynCoreImage>)imageLoadedWithId:(id)impl
                   withPlaynCoreGlScale:(PlaynCoreGlScale *)scale_ {
  return [this$0_ createStaticImageWithId:impl withPlaynCoreGlScale:scale_];
}

- (id<PlaynCoreImage>)loadFailedWithJavaLangThrowable:(JavaLangThrowable *)error {
  return [this$0_ createErrorImageWithJavaLangThrowable:error];
}

- (id)initWithPlaynCoreAbstractAssets:(PlaynCoreAbstractAssets *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$1 *typedCopy = (PlaynCoreAbstractAssets_$1 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation PlaynCoreAbstractAssets_$2

@synthesize this$0 = this$0_;
@synthesize val$path = val$path_;
@synthesize val$image = val$image_;

- (void)run {
  (void) [this$0_ loadImageWithNSString:val$path_ withPlaynCoreAbstractAssets_ImageReceiver:[[PlaynCoreAbstractAssets_$2_$1 alloc] initWithPlaynCoreAbstractAssets_$2:self]];
}

- (id)initWithPlaynCoreAbstractAssets:(PlaynCoreAbstractAssets *)outer$
                         withNSString:(NSString *)capture$0
              withPlaynCoreAsyncImage:(id<PlaynCoreAsyncImage>)capture$1 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$path_ = capture$0;
    val$image_ = capture$1;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$2 *typedCopy = (PlaynCoreAbstractAssets_$2 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$path = val$path_;
  typedCopy.val$image = val$image_;
}

@end
@implementation PlaynCoreAbstractAssets_$2_$1

@synthesize this$0 = this$0_;

- (id<PlaynCoreImage>)imageLoadedWithId:(id)impl
                   withPlaynCoreGlScale:(PlaynCoreGlScale *)scale_ {
  [this$0_.this$0 setImageLaterWithPlaynCoreAsyncImage:this$0_.val$image withId:impl withPlaynCoreGlScale:scale_];
  return this$0_.val$image;
}

- (id<PlaynCoreImage>)loadFailedWithJavaLangThrowable:(JavaLangThrowable *)error {
  [this$0_.this$0 setErrorLaterWithPlaynCoreAsyncImage:this$0_.val$image withJavaLangThrowable:error];
  return this$0_.val$image;
}

- (id)initWithPlaynCoreAbstractAssets_$2:(PlaynCoreAbstractAssets_$2 *)outer$ {
  if ((self = [super init])) {
    this$0_ = outer$;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$2_$1 *typedCopy = (PlaynCoreAbstractAssets_$2_$1 *) copy;
  typedCopy.this$0 = this$0_;
}

@end
@implementation PlaynCoreAbstractAssets_$3

@synthesize this$0 = this$0_;
@synthesize val$callback = val$callback_;
@synthesize val$path = val$path_;

- (void)run {
  @try {
    [((PlaynCoreAbstractPlatform *) nil_chk(this$0_.platform)) notifySuccessWithPlaynCoreUtilCallback:val$callback_ withId:[this$0_ getTextSyncWithNSString:val$path_]];
  }
  @catch (JavaLangThrowable *t) {
    [((PlaynCoreAbstractPlatform *) nil_chk(this$0_.platform)) notifyFailureWithPlaynCoreUtilCallback:val$callback_ withJavaLangThrowable:t];
  }
}

- (id)initWithPlaynCoreAbstractAssets:(PlaynCoreAbstractAssets *)outer$
            withPlaynCoreUtilCallback:(id<PlaynCoreUtilCallback>)capture$0
                         withNSString:(NSString *)capture$1 {
  if ((self = [super init])) {
    this$0_ = outer$;
    val$callback_ = capture$0;
    val$path_ = capture$1;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$3 *typedCopy = (PlaynCoreAbstractAssets_$3 *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.val$callback = val$callback_;
  typedCopy.val$path = val$path_;
}

@end
@implementation PlaynCoreAbstractAssets_$4

@synthesize val$image = val$image_;
@synthesize val$impl = val$impl_;
@synthesize val$scale = val$scale_;

- (void)run {
  [((id<PlaynCoreAsyncImage>) nil_chk(val$image_)) setImageWithId:val$impl_ withPlaynCoreGlScale:val$scale_];
}

- (id)initWithPlaynCoreAsyncImage:(id<PlaynCoreAsyncImage>)capture$0
                           withId:(id)capture$1
             withPlaynCoreGlScale:(PlaynCoreGlScale *)capture$2 {
  if ((self = [super init])) {
    val$image_ = capture$0;
    val$impl_ = capture$1;
    val$scale_ = capture$2;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$4 *typedCopy = (PlaynCoreAbstractAssets_$4 *) copy;
  typedCopy.val$image = val$image_;
  typedCopy.val$impl = val$impl_;
  typedCopy.val$scale = val$scale_;
}

@end
@implementation PlaynCoreAbstractAssets_$5

@synthesize val$image = val$image_;
@synthesize val$error = val$error_;

- (void)run {
  [((id<PlaynCoreAsyncImage>) nil_chk(val$image_)) setErrorWithJavaLangThrowable:val$error_];
}

- (id)initWithPlaynCoreAsyncImage:(id<PlaynCoreAsyncImage>)capture$0
            withJavaLangThrowable:(JavaLangThrowable *)capture$1 {
  if ((self = [super init])) {
    val$image_ = capture$0;
    val$error_ = capture$1;
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PlaynCoreAbstractAssets_$5 *typedCopy = (PlaynCoreAbstractAssets_$5 *) copy;
  typedCopy.val$image = val$image_;
  typedCopy.val$error = val$error_;
}

@end
