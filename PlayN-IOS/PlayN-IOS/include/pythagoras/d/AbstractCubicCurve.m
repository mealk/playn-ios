//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pythagoras/d/AbstractCubicCurve.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSDoubleArray.h"
#include "java/lang/Math.h"
#include "java/util/NoSuchElementException.h"
#include "pythagoras/d/AbstractCubicCurve.h"
#include "pythagoras/d/Crossing.h"
#include "pythagoras/d/CubicCurve.h"
#include "pythagoras/d/CubicCurves.h"
#include "pythagoras/d/FlatteningPathIterator.h"
#include "pythagoras/d/ICubicCurve.h"
#include "pythagoras/d/IPoint.h"
#include "pythagoras/d/IRectangle.h"
#include "pythagoras/d/PathIterator.h"
#include "pythagoras/d/Point.h"
#include "pythagoras/d/Rectangle.h"
#include "pythagoras/d/Transform.h"

@implementation PythagorasDAbstractCubicCurve

- (PythagorasDPoint *)p1 {
  return [[PythagorasDPoint alloc] initWithDouble:[self x1] withDouble:[self y1]];
}

- (PythagorasDPoint *)ctrlP1 {
  return [[PythagorasDPoint alloc] initWithDouble:[self ctrlX1] withDouble:[self ctrlY1]];
}

- (PythagorasDPoint *)ctrlP2 {
  return [[PythagorasDPoint alloc] initWithDouble:[self ctrlX2] withDouble:[self ctrlY2]];
}

- (PythagorasDPoint *)p2 {
  return [[PythagorasDPoint alloc] initWithDouble:[self x2] withDouble:[self y2]];
}

- (double)flatnessSq {
  return [PythagorasDCubicCurves flatnessSqWithDouble:[self x1] withDouble:[self y1] withDouble:[self ctrlX1] withDouble:[self ctrlY1] withDouble:[self ctrlX2] withDouble:[self ctrlY2] withDouble:[self x2] withDouble:[self y2]];
}

- (double)flatness {
  return [PythagorasDCubicCurves flatnessWithDouble:[self x1] withDouble:[self y1] withDouble:[self ctrlX1] withDouble:[self ctrlY1] withDouble:[self ctrlX2] withDouble:[self ctrlY2] withDouble:[self x2] withDouble:[self y2]];
}

- (void)subdivideWithPythagorasDCubicCurve:(PythagorasDCubicCurve *)left
                 withPythagorasDCubicCurve:(PythagorasDCubicCurve *)right {
  [PythagorasDCubicCurves subdivideWithPythagorasDICubicCurve:self withPythagorasDCubicCurve:left withPythagorasDCubicCurve:right];
}

- (PythagorasDCubicCurve *)clone {
  return [[PythagorasDCubicCurve alloc] initWithDouble:[self x1] withDouble:[self y1] withDouble:[self ctrlX1] withDouble:[self ctrlY1] withDouble:[self ctrlX2] withDouble:[self ctrlY2] withDouble:[self x2] withDouble:[self y2]];
}

- (BOOL)isEmpty {
  return YES;
}

- (BOOL)containsWithDouble:(double)px
                withDouble:(double)py {
  return [PythagorasDCrossing isInsideEvenOddWithInt:[PythagorasDCrossing crossShapeWithPythagorasDIShape:self withDouble:px withDouble:py]];
}

- (BOOL)containsWithDouble:(double)rx
                withDouble:(double)ry
                withDouble:(double)rw
                withDouble:(double)rh {
  int cross = [PythagorasDCrossing intersectShapeWithPythagorasDIShape:self withDouble:rx withDouble:ry withDouble:rw withDouble:rh];
  return (cross != PythagorasDCrossing_CROSSING) && [PythagorasDCrossing isInsideEvenOddWithInt:cross];
}

- (BOOL)containsWithPythagorasDIPoint:(id<PythagorasDIPoint>)p {
  return [self containsWithDouble:[((id<PythagorasDIPoint>) nil_chk(p)) x] withDouble:[((id<PythagorasDIPoint>) nil_chk(p)) y]];
}

- (BOOL)containsWithPythagorasDIRectangle:(id<PythagorasDIRectangle>)r {
  return [self containsWithDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) x] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) y] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) width] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) height]];
}

- (BOOL)intersectsWithDouble:(double)rx
                  withDouble:(double)ry
                  withDouble:(double)rw
                  withDouble:(double)rh {
  int cross = [PythagorasDCrossing intersectShapeWithPythagorasDIShape:self withDouble:rx withDouble:ry withDouble:rw withDouble:rh];
  return (cross == PythagorasDCrossing_CROSSING) || [PythagorasDCrossing isInsideEvenOddWithInt:cross];
}

- (BOOL)intersectsWithPythagorasDIRectangle:(id<PythagorasDIRectangle>)r {
  return [self intersectsWithDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) x] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) y] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) width] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) height]];
}

- (PythagorasDRectangle *)bounds {
  return [self boundsWithPythagorasDRectangle:[[PythagorasDRectangle alloc] init]];
}

- (PythagorasDRectangle *)boundsWithPythagorasDRectangle:(PythagorasDRectangle *)target {
  double x1 = [self x1], y1 = [self y1], x2 = [self x2], y2 = [self y2];
  double ctrlx1 = [self ctrlX1], ctrly1 = [self ctrlY1];
  double ctrlx2 = [self ctrlX2], ctrly2 = [self ctrlY2];
  double rx1 = [JavaLangMath minWithDouble:[JavaLangMath minWithDouble:x1 withDouble:x2] withDouble:[JavaLangMath minWithDouble:ctrlx1 withDouble:ctrlx2]];
  double ry1 = [JavaLangMath minWithDouble:[JavaLangMath minWithDouble:y1 withDouble:y2] withDouble:[JavaLangMath minWithDouble:ctrly1 withDouble:ctrly2]];
  double rx2 = [JavaLangMath maxWithDouble:[JavaLangMath maxWithDouble:x1 withDouble:x2] withDouble:[JavaLangMath maxWithDouble:ctrlx1 withDouble:ctrlx2]];
  double ry2 = [JavaLangMath maxWithDouble:[JavaLangMath maxWithDouble:y1 withDouble:y2] withDouble:[JavaLangMath maxWithDouble:ctrly1 withDouble:ctrly2]];
  [((PythagorasDRectangle *) nil_chk(target)) setBoundsWithDouble:rx1 withDouble:ry1 withDouble:rx2 - rx1 withDouble:ry2 - ry1];
  return target;
}

- (id<PythagorasDPathIterator>)pathIteratorWithPythagorasDTransform:(id<PythagorasDTransform>)t {
  return [[PythagorasDAbstractCubicCurve_Iterator alloc] initWithPythagorasDICubicCurve:self withPythagorasDTransform:t];
}

- (id<PythagorasDPathIterator>)pathIteratorWithPythagorasDTransform:(id<PythagorasDTransform>)at
                                                         withDouble:(double)flatness {
  return [[PythagorasDFlatteningPathIterator alloc] initWithPythagorasDPathIterator:[self pathIteratorWithPythagorasDTransform:at] withDouble:flatness];
}

- (double)ctrlX1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)ctrlX2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)ctrlY1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)ctrlY2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)x1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)x2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)y1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)y2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id)init {
  return [super init];
}

- (id)copyWithZone:(NSZone *)zone {
  return [self clone];
}

@end
@implementation PythagorasDAbstractCubicCurve_Iterator

@synthesize c = c_;
@synthesize t = t_;
@synthesize index = index_;

- (id)initWithPythagorasDICubicCurve:(id<PythagorasDICubicCurve>)c
            withPythagorasDTransform:(id<PythagorasDTransform>)t {
  if ((self = [super init])) {
    self.c = c;
    self.t = t;
  }
  return self;
}

- (int)windingRule {
  return PythagorasDPathIterator_WIND_NON_ZERO;
}

- (BOOL)isDone {
  return index_ > 1;
}

- (void)next {
  index_++;
}

- (int)currentSegmentWithDoubleArray:(IOSDoubleArray *)coords {
  if ([self isDone]) {
    @throw [[JavaUtilNoSuchElementException alloc] initWithNSString:@"Iterator out of bounds"];
  }
  int type;
  int count;
  if (index_ == 0) {
    type = PythagorasDPathIterator_SEG_MOVETO;
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) x1];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) y1];
    count = 1;
  }
  else {
    type = PythagorasDPathIterator_SEG_CUBICTO;
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) ctrlX1];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) ctrlY1];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:2]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) ctrlX2];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:3]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) ctrlY2];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:4]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) x2];
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:5]) = [((id<PythagorasDICubicCurve>) nil_chk(c_)) y2];
    count = 3;
  }
  if (t_ != nil) {
    [t_ transformWithDoubleArray:coords withInt:0 withDoubleArray:coords withInt:0 withInt:count];
  }
  return type;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PythagorasDAbstractCubicCurve_Iterator *typedCopy = (PythagorasDAbstractCubicCurve_Iterator *) copy;
  typedCopy.c = c_;
  typedCopy.t = t_;
  typedCopy.index = index_;
}

@end
