//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pythagoras/d/AbstractRectangle.java
//
//  Created by Thomas on 7/25/13.
//

#include "IOSDoubleArray.h"
#include "java/lang/Math.h"
#include "java/util/NoSuchElementException.h"
#include "pythagoras/d/AbstractRectangle.h"
#include "pythagoras/d/Dimension.h"
#include "pythagoras/d/Dimensions.h"
#include "pythagoras/d/ILine.h"
#include "pythagoras/d/IPoint.h"
#include "pythagoras/d/IRectangle.h"
#include "pythagoras/d/IRectangularShape.h"
#include "pythagoras/d/Lines.h"
#include "pythagoras/d/PathIterator.h"
#include "pythagoras/d/Point.h"
#include "pythagoras/d/Points.h"
#include "pythagoras/d/Rectangle.h"
#include "pythagoras/d/RectangularShape.h"
#include "pythagoras/d/Transform.h"
#include "pythagoras/util/Platform.h"

@implementation PythagorasDAbstractRectangle

- (PythagorasDPoint *)location {
  return [self locationWithPythagorasDPoint:[[PythagorasDPoint alloc] init]];
}

- (PythagorasDPoint *)locationWithPythagorasDPoint:(PythagorasDPoint *)target {
  return [((PythagorasDPoint *) nil_chk(target)) setWithDouble:[self x] withDouble:[self y]];
}

- (PythagorasDDimension *)size {
  return [self sizeWithPythagorasDDimension:[[PythagorasDDimension alloc] init]];
}

- (PythagorasDDimension *)sizeWithPythagorasDDimension:(PythagorasDDimension *)target {
  [((PythagorasDDimension *) nil_chk(target)) setSizeWithDouble:[self width] withDouble:[self height]];
  return target;
}

- (PythagorasDRectangle *)intersectionWithDouble:(double)rx
                                      withDouble:(double)ry
                                      withDouble:(double)rw
                                      withDouble:(double)rh {
  double x1 = [JavaLangMath maxWithDouble:[self x] withDouble:rx];
  double y1 = [JavaLangMath maxWithDouble:[self y] withDouble:ry];
  double x2 = [JavaLangMath minWithDouble:[self maxX] withDouble:rx + rw];
  double y2 = [JavaLangMath minWithDouble:[self maxY] withDouble:ry + rh];
  return [[PythagorasDRectangle alloc] initWithDouble:x1 withDouble:y1 withDouble:x2 - x1 withDouble:y2 - y1];
}

- (PythagorasDRectangle *)intersectionWithPythagorasDIRectangle:(id<PythagorasDIRectangle>)r {
  return [self intersectionWithDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) x] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) y] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) width] withDouble:[((id<PythagorasDIRectangle>) nil_chk(r)) height]];
}

- (PythagorasDRectangle *)union__WithPythagorasDIRectangle:(id<PythagorasDIRectangle>)r {
  PythagorasDRectangle *rect = [[PythagorasDRectangle alloc] initWithPythagorasDIRectangle:self];
  [((PythagorasDRectangle *) nil_chk(rect)) addWithPythagorasDIRectangle:r];
  return rect;
}

- (BOOL)intersectsLineWithDouble:(double)x1
                      withDouble:(double)y1
                      withDouble:(double)x2
                      withDouble:(double)y2 {
  return [PythagorasDLines lineIntersectsRectWithDouble:x1 withDouble:y1 withDouble:x2 withDouble:y2 withDouble:[self x] withDouble:[self y] withDouble:[self width] withDouble:[self height]];
}

- (BOOL)intersectsLineWithPythagorasDILine:(id<PythagorasDILine>)l {
  return [self intersectsLineWithDouble:[((id<PythagorasDILine>) nil_chk(l)) x1] withDouble:[((id<PythagorasDILine>) nil_chk(l)) y1] withDouble:[((id<PythagorasDILine>) nil_chk(l)) x2] withDouble:[((id<PythagorasDILine>) nil_chk(l)) y2]];
}

- (int)outcodeWithDouble:(double)px
              withDouble:(double)py {
  int code = 0;
  if ([self width] <= 0) {
    code |= PythagorasDIRectangle_OUT_LEFT | PythagorasDIRectangle_OUT_RIGHT;
  }
  else if (px < [self x]) {
    code |= PythagorasDIRectangle_OUT_LEFT;
  }
  else if (px > [self maxX]) {
    code |= PythagorasDIRectangle_OUT_RIGHT;
  }
  if ([self height] <= 0) {
    code |= PythagorasDIRectangle_OUT_TOP | PythagorasDIRectangle_OUT_BOTTOM;
  }
  else if (py < [self y]) {
    code |= PythagorasDIRectangle_OUT_TOP;
  }
  else if (py > [self maxY]) {
    code |= PythagorasDIRectangle_OUT_BOTTOM;
  }
  return code;
}

- (int)outcodeWithPythagorasDIPoint:(id<PythagorasDIPoint>)p {
  return [self outcodeWithDouble:[((id<PythagorasDIPoint>) nil_chk(p)) x] withDouble:[((id<PythagorasDIPoint>) nil_chk(p)) y]];
}

- (PythagorasDRectangle *)clone {
  return [[PythagorasDRectangle alloc] initWithPythagorasDIRectangle:self];
}

- (BOOL)containsWithDouble:(double)px
                withDouble:(double)py {
  if ([self isEmpty]) return NO;
  double x = [self x], y = [self y];
  if (px < x || py < y) return NO;
  px -= x;
  py -= y;
  return px < [self width] && py < [self height];
}

- (BOOL)containsWithDouble:(double)rx
                withDouble:(double)ry
                withDouble:(double)rw
                withDouble:(double)rh {
  if ([self isEmpty]) return NO;
  double x1 = [self x], y1 = [self y], x2 = x1 + [self width], y2 = y1 + [self height];
  return (x1 <= rx) && (rx + rw <= x2) && (y1 <= ry) && (ry + rh <= y2);
}

- (BOOL)intersectsWithDouble:(double)rx
                  withDouble:(double)ry
                  withDouble:(double)rw
                  withDouble:(double)rh {
  if ([self isEmpty]) return NO;
  double x1 = [self x], y1 = [self y], x2 = x1 + [self width], y2 = y1 + [self height];
  return (rx + rw > x1) && (rx < x2) && (ry + rh > y1) && (ry < y2);
}

- (id<PythagorasDPathIterator>)pathIteratorWithPythagorasDTransform:(id<PythagorasDTransform>)t {
  return [[PythagorasDAbstractRectangle_Iterator alloc] initWithPythagorasDIRectangle:self withPythagorasDTransform:t];
}

- (id<PythagorasDPathIterator>)pathIteratorWithPythagorasDTransform:(id<PythagorasDTransform>)t
                                                         withDouble:(double)flatness {
  return [[PythagorasDAbstractRectangle_Iterator alloc] initWithPythagorasDIRectangle:self withPythagorasDTransform:t];
}

- (BOOL)isEqual:(id)obj {
  if (obj == self) {
    return YES;
  }
  if ([obj isKindOfClass:[PythagorasDAbstractRectangle class]]) {
    PythagorasDAbstractRectangle *r = (PythagorasDAbstractRectangle *) obj;
    return [((PythagorasDAbstractRectangle *) nil_chk(r)) x] == [self x] && [((PythagorasDAbstractRectangle *) nil_chk(r)) y] == [self y] && [((PythagorasDAbstractRectangle *) nil_chk(r)) width] == [self width] && [((PythagorasDAbstractRectangle *) nil_chk(r)) height] == [self height];
  }
  return NO;
}

- (NSUInteger)hash {
  return [PythagorasUtilPlatform hashCodeWithDouble:[self x]] ^ [PythagorasUtilPlatform hashCodeWithDouble:[self y]] ^ [PythagorasUtilPlatform hashCodeWithDouble:[self width]] ^ [PythagorasUtilPlatform hashCodeWithDouble:[self height]];
}

- (NSString *)description {
  return [NSString stringWithFormat:@"%@%@", [PythagorasDDimensions dimenToStringWithDouble:[self width] withDouble:[self height]], [PythagorasDPoints pointToStringWithDouble:[self x] withDouble:[self y]]];
}

- (double)height {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)width {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)x {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (double)y {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id)init {
  return [super init];
}

- (id)copyWithZone:(NSZone *)zone {
  return [self clone];
}

@end
@implementation PythagorasDAbstractRectangle_Iterator

@synthesize x = x_;
@synthesize y = y_;
@synthesize width = width_;
@synthesize height = height_;
@synthesize t = t_;
@synthesize index = index_;

- (id)initWithPythagorasDIRectangle:(id<PythagorasDIRectangle>)r
           withPythagorasDTransform:(id<PythagorasDTransform>)at {
  if ((self = [super init])) {
    self.x = [((id<PythagorasDIRectangle>) nil_chk(r)) x];
    self.y = [((id<PythagorasDIRectangle>) nil_chk(r)) y];
    self.width = [((id<PythagorasDIRectangle>) nil_chk(r)) width];
    self.height = [((id<PythagorasDIRectangle>) nil_chk(r)) height];
    self.t = at;
    if (width_ < 0.0f || height_ < 0.0f) {
      index_ = 6;
    }
  }
  return self;
}

- (int)windingRule {
  return PythagorasDPathIterator_WIND_NON_ZERO;
}

- (BOOL)isDone {
  return index_ > 5;
}

- (void)next {
  index_++;
}

- (int)currentSegmentWithDoubleArray:(IOSDoubleArray *)coords {
  if ([self isDone]) {
    @throw [[JavaUtilNoSuchElementException alloc] initWithNSString:@"Iterator out of bounds"];
  }
  if (index_ == 5) {
    return PythagorasDPathIterator_SEG_CLOSE;
  }
  int type;
  if (index_ == 0) {
    type = PythagorasDPathIterator_SEG_MOVETO;
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = x_;
    (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = y_;
  }
  else {
    type = PythagorasDPathIterator_SEG_LINETO;
    switch (index_) {
      case 1:
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = x_ + width_;
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = y_;
      break;
      case 2:
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = x_ + width_;
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = y_ + height_;
      break;
      case 3:
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = x_;
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = y_ + height_;
      break;
      case 4:
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:0]) = x_;
      (*[((IOSDoubleArray *) nil_chk(coords)) doubleRefAtIndex:1]) = y_;
      break;
    }
  }
  if (t_ != nil) {
    [t_ transformWithDoubleArray:coords withInt:0 withDoubleArray:coords withInt:0 withInt:1];
  }
  return type;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  PythagorasDAbstractRectangle_Iterator *typedCopy = (PythagorasDAbstractRectangle_Iterator *) copy;
  typedCopy.x = x_;
  typedCopy.y = y_;
  typedCopy.width = width_;
  typedCopy.height = height_;
  typedCopy.t = t_;
  typedCopy.index = index_;
}

@end
