//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: react/MultiFailureException.java
//
//  Created by Thomas on 7/10/13.
//

#import "IOSClass.h"
#import "java/io/PrintStream.h"
#import "java/io/PrintWriter.h"
#import "java/lang/Error.h"
#import "java/lang/Iterable.h"
#import "java/lang/RuntimeException.h"
#import "java/lang/StringBuilder.h"
#import "java/lang/Throwable.h"
#import "java/util/ArrayList.h"
#import "java/util/Iterator.h"
#import "java/util/List.h"
#import "react/MultiFailureException.h"

@implementation ReactMultiFailureException

@synthesize _failures = _failures_;

- (id<JavaLangIterable>)failures {
  return _failures_;
}

- (void)addFailureWithJavaLangThrowable:(JavaLangThrowable *)t {
  [((id<JavaUtilList>) NIL_CHK(_failures_)) addWithId:t];
}

- (void)trigger {
  if ([((id<JavaUtilList>) NIL_CHK(_failures_)) size] != 1) @throw self;
  JavaLangThrowable *t = ((JavaLangThrowable *) [((id<JavaUtilList>) NIL_CHK(_failures_)) getWithInt:0]);
  if ([t isKindOfClass:[JavaLangRuntimeException class]]) {
    @throw (JavaLangRuntimeException *) t;
  }
  else if ([t isKindOfClass:[JavaLangError class]]) {
    @throw (JavaLangError *) t;
  }
  else {
    @throw (ReactMultiFailureException *) [self initCauseWithJavaLangThrowable:t];
  }
}

- (NSString *)getMessage {
  JavaLangStringBuilder *buf = [[JavaLangStringBuilder alloc] init];
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_failures_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      JavaLangThrowable *failure = ((JavaLangThrowable *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      if ([((JavaLangStringBuilder *) NIL_CHK(buf)) sequenceLength] > 0) (void) [((JavaLangStringBuilder *) NIL_CHK(buf)) appendWithNSString:@", "];
      (void) [[[((JavaLangStringBuilder *) NIL_CHK(buf)) appendWithNSString:[[((JavaLangThrowable *) NIL_CHK(failure)) getClass] getName]] appendWithNSString:@": "] appendWithNSString:[((JavaLangThrowable *) NIL_CHK(failure)) getMessage]];
    }
  }
  return [NSString stringWithFormat:@"%d failures: %@", [((id<JavaUtilList>) NIL_CHK(_failures_)) size], buf];
}

- (void)printStackTraceWithJavaIoPrintStream:(JavaIoPrintStream *)s {
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_failures_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      JavaLangThrowable *failure = ((JavaLangThrowable *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((JavaLangThrowable *) NIL_CHK(failure)) printStackTraceWithJavaIoPrintStream:s];
    }
  }
}

- (void)printStackTraceWithJavaIoPrintWriter:(JavaIoPrintWriter *)w {
  {
    id<JavaUtilIterator> iter__ = ((id<JavaUtilIterator>) [((id<JavaUtilList>) NIL_CHK(_failures_)) iterator]);
    while ([((id<JavaUtilIterator>) NIL_CHK(iter__)) hasNext]) {
      JavaLangThrowable *failure = ((JavaLangThrowable *) [((id<JavaUtilIterator>) NIL_CHK(iter__)) next]);
      [((JavaLangThrowable *) NIL_CHK(failure)) printStackTraceWithJavaIoPrintWriter:w];
    }
  }
}

- (JavaLangThrowable *)fillInStackTrace {
  return self;
}

- (id)init {
  if ((self = [super init])) {
    _failures_ = [[JavaUtilArrayList alloc] init];
  }
  return self;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  ReactMultiFailureException *typedCopy = (ReactMultiFailureException *) copy;
  typedCopy._failures = _failures_;
}

@end
